<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.stateless.StatelessSessionQueryTest" tests="3" time="0.172" timestamp="2013-02-28T20:19:20">
  <properties />
  <testcase classname="org.hibernate.test.stateless.StatelessSessionQueryTest" name="testCriteria" time="0.073" />
  <testcase classname="org.hibernate.test.stateless.StatelessSessionQueryTest" name="testCriteriaWithSelectFetchMode" time="0.006" />
  <testcase classname="org.hibernate.test.stateless.StatelessSessionQueryTest" name="testHQL" time="0.01" />
  <system-out><![CDATA[14:19:20,816  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.stateless.StatelessSessionQueryTest
14:19:20,818  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/stateless/Contact.hbm.xml
14:19:20,841  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:19:20,841  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:19:20,841  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:19:20,842  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:19:20,842  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:19:20,845  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:19:20,845  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:19:20,846  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:19:20,846  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:19:20,847  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:19:20,854  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:19:20,855 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:19:20,855 DEBUG SQL:104 - 
    alter table Contact 
        drop constraint FK9BEFBC00A0FB54EE
14:19:20,855 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Contact drop constraint FK9BEFBC00A0FB54EE
14:19:20,855 ERROR SchemaExport:426 - Table "CONTACT" not found; SQL statement:

    alter table Contact 
        drop constraint FK9BEFBC00A0FB54EE [42102-145]
14:19:20,856 DEBUG SQL:104 - 
    alter table Org 
        drop constraint FK136C45A6AA352
14:19:20,856 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Org drop constraint FK136C45A6AA352
14:19:20,856 ERROR SchemaExport:426 - Table "ORG" not found; SQL statement:

    alter table Org 
        drop constraint FK136C45A6AA352 [42102-145]
14:19:20,856 DEBUG SQL:104 - 
    drop table Contact if exists
14:19:20,857 DEBUG SQL:104 - 
    drop table Country if exists
14:19:20,857 DEBUG SQL:104 - 
    drop table Org if exists
14:19:20,857 DEBUG SQL:104 - 
    create table Contact (
        id integer generated by default as identity,
        org integer,
        primary key (id)
    )
14:19:20,858 DEBUG SQL:104 - 
    create table Country (
        id integer generated by default as identity,
        primary key (id)
    )
14:19:20,858 DEBUG SQL:104 - 
    create table Org (
        id integer generated by default as identity,
        country integer,
        primary key (id)
    )
14:19:20,859 DEBUG SQL:104 - 
    alter table Contact 
        add constraint FK9BEFBC00A0FB54EE 
        foreign key (org) 
        references Org
14:19:20,859 DEBUG SQL:104 - 
    alter table Org 
        add constraint FK136C45A6AA352 
        foreign key (country) 
        references Country
14:19:20,860  INFO SchemaExport:405 - HHH000230: Schema export complete
14:19:20,860  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:19:20,861  INFO CustomRunner:139 - Test: testCriteria
14:19:20,864 DEBUG SQL:104 - 
    insert 
    into
        Country
        (id) 
    values
        (null)
14:19:20,864 DEBUG SQL:104 - 
    insert 
    into
        Org
        (id, country) 
    values
        (null, ?)
14:19:20,865 DEBUG SQL:104 - 
    insert 
    into
        Contact
        (id, org) 
    values
        (null, ?)
14:19:20,927 DEBUG SQL:104 - 
    select
        this_.id as id0_1_,
        this_.org as org0_1_,
        org2_.id as id2_0_,
        org2_.country as country2_0_ 
    from
        Contact this_ 
    left outer join
        Org org2_ 
            on this_.org=org2_.id
14:19:20,928 DEBUG SQL:104 - 
    select
        country0_.id as id1_0_ 
    from
        Country country0_ 
    where
        country0_.id=?
14:19:20,930 DEBUG SQL:104 - 
    update
        Org 
    set
        country=? 
    where
        id=?
14:19:20,930 DEBUG SQL:104 - 
    update
        Contact 
    set
        org=? 
    where
        id=?
14:19:20,931 DEBUG SQL:104 - 
    delete 
    from
        Country 
    where
        id=?
14:19:20,931 DEBUG SQL:104 - 
    delete 
    from
        Org 
    where
        id=?
14:19:20,931 DEBUG SQL:104 - 
    delete 
    from
        Contact 
    where
        id=?
14:19:20,935  INFO CustomRunner:139 - Test: testCriteriaWithSelectFetchMode
14:19:20,936 DEBUG SQL:104 - 
    insert 
    into
        Country
        (id) 
    values
        (null)
14:19:20,937 DEBUG SQL:104 - 
    insert 
    into
        Org
        (id, country) 
    values
        (null, ?)
14:19:20,937 DEBUG SQL:104 - 
    insert 
    into
        Contact
        (id, org) 
    values
        (null, ?)
14:19:20,938 DEBUG SQL:104 - 
    select
        this_.id as id0_0_,
        this_.org as org0_0_ 
    from
        Contact this_
14:19:20,938 DEBUG SQL:104 - 
    select
        org0_.id as id2_1_,
        org0_.country as country2_1_,
        country1_.id as id1_0_ 
    from
        Org org0_ 
    left outer join
        Country country1_ 
            on org0_.country=country1_.id 
    where
        org0_.id=?
14:19:20,940 DEBUG SQL:104 - 
    update
        Org 
    set
        country=? 
    where
        id=?
14:19:20,940 DEBUG SQL:104 - 
    update
        Contact 
    set
        org=? 
    where
        id=?
14:19:20,940 DEBUG SQL:104 - 
    delete 
    from
        Country 
    where
        id=?
14:19:20,940 DEBUG SQL:104 - 
    delete 
    from
        Org 
    where
        id=?
14:19:20,941 DEBUG SQL:104 - 
    delete 
    from
        Contact 
    where
        id=?
14:19:20,941  INFO CustomRunner:139 - Test: testHQL
14:19:20,942 DEBUG SQL:104 - 
    insert 
    into
        Country
        (id) 
    values
        (null)
14:19:20,943 DEBUG SQL:104 - 
    insert 
    into
        Org
        (id, country) 
    values
        (null, ?)
14:19:20,943 DEBUG SQL:104 - 
    insert 
    into
        Contact
        (id, org) 
    values
        (null, ?)
14:19:20,944 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.stateless.Contact c join fetch c.org join fetch c.org.country
14:19:20,945 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          +-[RANGE] Node: 'RANGE'
          |  +-[DOT] Node: '.'
          |  |  +-[DOT] Node: '.'
          |  |  |  +-[DOT] Node: '.'
          |  |  |  |  +-[DOT] Node: '.'
          |  |  |  |  |  +-[IDENT] Node: 'org'
          |  |  |  |  |  \-[IDENT] Node: 'hibernate'
          |  |  |  |  \-[IDENT] Node: 'test'
          |  |  |  \-[IDENT] Node: 'stateless'
          |  |  \-[IDENT] Node: 'Contact'
          |  \-[ALIAS] Node: 'c'
          +-[JOIN] Node: 'join'
          |  +-[FETCH] Node: 'fetch'
          |  \-[DOT] Node: '.'
          |     +-[IDENT] Node: 'c'
          |     \-[IDENT] Node: 'org'
          \-[JOIN] Node: 'join'
             +-[FETCH] Node: 'fetch'
             \-[DOT] Node: '.'
                +-[DOT] Node: '.'
                |  +-[IDENT] Node: 'c'
                |  \-[IDENT] Node: 'org'
                \-[IDENT] Node: 'country'

14:19:20,945 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:20,946 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.stateless.Contact (c) -> contact0_
14:19:20,946 DEBUG FromReferenceNode:74 - Resolved : c -> contact0_.id
14:19:20,946 DEBUG DotNode:599 - getDataType() : org -> org.hibernate.type.ManyToOneType(org.hibernate.test.stateless.Org)
14:19:20,946 DEBUG DotNode:389 - dereferenceEntityJoin() : generating join for org in org.hibernate.test.stateless.Contact (<no alias>) parent = [ {null} ]
14:19:20,946 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.stateless.Org (<no alias>) -> org1_
14:19:20,946 DEBUG FromClause:282 - addJoinByPathMap() : c.org -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org1_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}
14:19:20,947 DEBUG FromReferenceNode:74 - Resolved : c.org -> contact0_.org
14:19:20,947 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'Org org1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org1_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}

14:19:20,947 DEBUG FromReferenceNode:74 - Resolved : c -> contact0_.id
14:19:20,947 DEBUG DotNode:599 - getDataType() : org -> org.hibernate.type.ManyToOneType(org.hibernate.test.stateless.Org)
14:19:20,947 DEBUG DotNode:389 - dereferenceEntityJoin() : generating join for org in org.hibernate.test.stateless.Contact (<no alias>) parent = [  ( . ( . contact0_.id org ) country ) ]
14:19:20,947 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.stateless.Org (<no alias>) -> org2_
14:19:20,947 DEBUG FromClause:282 - addJoinByPathMap() : c.org -> ImpliedFromElement{implied,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org2_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}
14:19:20,947 DEBUG FromReferenceNode:74 - Resolved : c.org -> contact0_.org
14:19:20,948 DEBUG DotNode:599 - getDataType() : country -> org.hibernate.type.ManyToOneType(org.hibernate.test.stateless.Country)
14:19:20,948 DEBUG DotNode:389 - dereferenceEntityJoin() : generating join for country in org.hibernate.test.stateless.Org (<no alias>) parent = [ {null} ]
14:19:20,948 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.stateless.Country (<no alias>) -> country3_
14:19:20,948 DEBUG FromClause:282 - addJoinByPathMap() : c.org.country -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Country,tableAlias=country3_,origin=Org org2_,columns={org2_.country ,className=org.hibernate.test.stateless.Country}}
14:19:20,948 DEBUG FromReferenceNode:74 - Resolved : c.org.country -> org2_.country
14:19:20,948 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] ImpliedFromElement: 'Org org2_' ImpliedFromElement{implied in FROM clause,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org2_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}
    \-[JOIN_FRAGMENT] FromElement: 'Country country3_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Country,tableAlias=country3_,origin=Org org2_,columns={org2_.country ,className=org.hibernate.test.stateless.Country}}

14:19:20,948 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} ( Contact contact0_ Org org1_ ( Org org2_ Country country3_ ) ) ) )
14:19:20,948 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:19:20,949 DEBUG JoinProcessor:175 - Using FROM fragment [Contact contact0_]
14:19:20,949 DEBUG JoinProcessor:175 - Using FROM fragment [inner join Org org1_ on contact0_.org=org1_.id]
14:19:20,949 DEBUG JoinProcessor:175 - Using FROM fragment [inner join Org org2_ on contact0_.org=org2_.id]
14:19:20,949 DEBUG JoinProcessor:175 - Using FROM fragment [inner join Country country3_ on org2_.country=country3_.id]
14:19:20,949 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (Org,Contact,Country)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'contact0_.id as id0_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=c,role=null,tableName=Contact,tableAlias=contact0_,origin=null,columns={,className=org.hibernate.test.stateless.Contact}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'org1_.id as id2_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org1_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'country3_.id as id1_2_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Country,tableAlias=country3_,origin=inner join Org org2_ on contact0_.org=org2_.id,columns={org2_.country ,className=org.hibernate.test.stateless.Country}}}
    |  +-[SQL_TOKEN] SqlFragment: 'contact0_.org as org0_0_'
    |  \-[SQL_TOKEN] SqlFragment: 'org1_.country as country2_1_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=4, fromElements=4, fromElementByClassAlias=[c], fromElementByTableAlias=[contact0_, org1_, country3_, org2_], fromElementsByPath=[c.org.country, c.org], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'Contact contact0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=c,role=null,tableName=Contact,tableAlias=contact0_,origin=null,columns={,className=org.hibernate.test.stateless.Contact}}
          +-[JOIN_FRAGMENT] FromElement: 'inner join Org org1_ on contact0_.org=org1_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org1_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}
          \-[JOIN_FRAGMENT] ImpliedFromElement: 'inner join Org org2_ on contact0_.org=org2_.id' ImpliedFromElement{implied in FROM clause,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Org,tableAlias=org2_,origin=Contact contact0_,columns={contact0_.org ,className=org.hibernate.test.stateless.Org}}
             \-[JOIN_FRAGMENT] FromElement: 'inner join Country country3_ on org2_.country=country3_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Country,tableAlias=country3_,origin=inner join Org org2_ on contact0_.org=org2_.id,columns={org2_.country ,className=org.hibernate.test.stateless.Country}}

14:19:20,949 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:20,949 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.stateless.Contact c join fetch c.org join fetch c.org.country
14:19:20,950 DEBUG QueryTranslatorImpl:236 - SQL: select contact0_.id as id0_0_, org1_.id as id2_1_, country3_.id as id1_2_, contact0_.org as org0_0_, org1_.country as country2_1_ from Contact contact0_ inner join Org org1_ on contact0_.org=org1_.id inner join Org org2_ on contact0_.org=org2_.id inner join Country country3_ on org2_.country=country3_.id
14:19:20,950 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:20,950 DEBUG SQL:104 - 
    select
        contact0_.id as id0_0_,
        org1_.id as id2_1_,
        country3_.id as id1_2_,
        contact0_.org as org0_0_,
        org1_.country as country2_1_ 
    from
        Contact contact0_ 
    inner join
        Org org1_ 
            on contact0_.org=org1_.id 
    inner join
        Org org2_ 
            on contact0_.org=org2_.id 
    inner join
        Country country3_ 
            on org2_.country=country3_.id
14:19:20,951 DEBUG SQL:104 - 
    update
        Org 
    set
        country=? 
    where
        id=?
14:19:20,951 DEBUG SQL:104 - 
    update
        Contact 
    set
        org=? 
    where
        id=?
14:19:20,952 DEBUG SQL:104 - 
    delete 
    from
        Country 
    where
        id=?
14:19:20,952 DEBUG SQL:104 - 
    delete 
    from
        Org 
    where
        id=?
14:19:20,952 DEBUG SQL:104 - 
    delete 
    from
        Contact 
    where
        id=?
14:19:20,953  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:19:20,953 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:19:20,953 DEBUG SQL:104 - 
    alter table Contact 
        drop constraint FK9BEFBC00A0FB54EE
14:19:20,954 DEBUG SQL:104 - 
    alter table Org 
        drop constraint FK136C45A6AA352
14:19:20,954 DEBUG SQL:104 - 
    drop table Contact if exists
14:19:20,954 DEBUG SQL:104 - 
    drop table Country if exists
14:19:20,955 DEBUG SQL:104 - 
    drop table Org if exists
14:19:20,955  INFO SchemaExport:405 - HHH000230: Schema export complete
14:19:20,955  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
