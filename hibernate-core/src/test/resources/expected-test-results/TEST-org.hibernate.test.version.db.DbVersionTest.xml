<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.version.db.DbVersionTest" tests="2" time="3.117" timestamp="2013-02-28T20:19:30">
  <properties />
  <testcase classname="org.hibernate.test.version.db.DbVersionTest" name="testCollectionNoVersion" time="0.035" />
  <testcase classname="org.hibernate.test.version.db.DbVersionTest" name="testCollectionVersion" time="3.027" />
  <system-out><![CDATA[14:19:30,090  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.version.db.DbVersionTest
14:19:30,092  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/version/db/User.hbm.xml
14:19:30,101  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:19:30,101  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:19:30,101  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:19:30,101  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:19:30,102  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:19:30,103  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:19:30,103  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:19:30,104  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:19:30,104  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:19:30,104  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:19:30,119  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:19:30,120 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:19:30,120 DEBUG SQL:104 - 
    alter table db_vers_user_group 
        drop constraint FK4575B1B957A44E56
14:19:30,121 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table db_vers_user_group drop constraint FK4575B1B957A44E56
14:19:30,121 ERROR SchemaExport:426 - Table "DB_VERS_USER_GROUP" not found; SQL statement:

    alter table db_vers_user_group 
        drop constraint FK4575B1B957A44E56 [42102-145]
14:19:30,121 DEBUG SQL:104 - 
    alter table db_vers_user_group 
        drop constraint FK4575B1B9857EE95E
14:19:30,121 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table db_vers_user_group drop constraint FK4575B1B9857EE95E
14:19:30,121 ERROR SchemaExport:426 - Table "DB_VERS_USER_GROUP" not found; SQL statement:

    alter table db_vers_user_group 
        drop constraint FK4575B1B9857EE95E [42102-145]
14:19:30,121 DEBUG SQL:104 - 
    alter table db_vers_user_perm 
        drop constraint FK75DE68768D2EFB1D
14:19:30,122 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table db_vers_user_perm drop constraint FK75DE68768D2EFB1D
14:19:30,122 ERROR SchemaExport:426 - Table "DB_VERS_USER_PERM" not found; SQL statement:

    alter table db_vers_user_perm 
        drop constraint FK75DE68768D2EFB1D [42102-145]
14:19:30,122 DEBUG SQL:104 - 
    alter table db_vers_user_perm 
        drop constraint FK75DE6876857EE95E
14:19:30,122 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table db_vers_user_perm drop constraint FK75DE6876857EE95E
14:19:30,122 ERROR SchemaExport:426 - Table "DB_VERS_USER_PERM" not found; SQL statement:

    alter table db_vers_user_perm 
        drop constraint FK75DE6876857EE95E [42102-145]
14:19:30,122 DEBUG SQL:104 - 
    drop table db_vers_group if exists
14:19:30,122 DEBUG SQL:104 - 
    drop table db_vers_permission if exists
14:19:30,123 DEBUG SQL:104 - 
    drop table db_vers_user if exists
14:19:30,123 DEBUG SQL:104 - 
    drop table db_vers_user_group if exists
14:19:30,123 DEBUG SQL:104 - 
    drop table db_vers_user_perm if exists
14:19:30,123 DEBUG SQL:104 - 
    create table db_vers_group (
        group_id bigint generated by default as identity,
        ts timestamp not null,
        name varchar(255) not null,
        primary key (group_id)
    )
14:19:30,124 DEBUG SQL:104 - 
    create table db_vers_permission (
        perm_id bigint generated by default as identity,
        ts timestamp not null,
        name varchar(255) not null,
        ctx varchar(255),
        priv varchar(255),
        primary key (perm_id)
    )
14:19:30,124 DEBUG SQL:104 - 
    create table db_vers_user (
        user_id bigint generated by default as identity,
        ts timestamp not null,
        user_name varchar(255) not null,
        primary key (user_id)
    )
14:19:30,125 DEBUG SQL:104 - 
    create table db_vers_user_group (
        user_id bigint not null,
        group_id bigint not null,
        primary key (group_id, user_id)
    )
14:19:30,125 DEBUG SQL:104 - 
    create table db_vers_user_perm (
        user_id bigint not null,
        perm_id bigint not null,
        primary key (user_id, perm_id)
    )
14:19:30,126 DEBUG SQL:104 - 
    alter table db_vers_group 
        add constraint uc_db_vers_group_1 unique (name)
14:19:30,126 DEBUG SQL:104 - 
    alter table db_vers_permission 
        add constraint uc_db_vers_permission_1 unique (name)
14:19:30,126 DEBUG SQL:104 - 
    alter table db_vers_user 
        add constraint uc_db_vers_user_1 unique (user_name)
14:19:30,127 DEBUG SQL:104 - 
    alter table db_vers_user_group 
        add constraint FK4575B1B957A44E56 
        foreign key (group_id) 
        references db_vers_group
14:19:30,127 DEBUG SQL:104 - 
    alter table db_vers_user_group 
        add constraint FK4575B1B9857EE95E 
        foreign key (user_id) 
        references db_vers_user
14:19:30,128 DEBUG SQL:104 - 
    alter table db_vers_user_perm 
        add constraint FK75DE68768D2EFB1D 
        foreign key (perm_id) 
        references db_vers_permission
14:19:30,128 DEBUG SQL:104 - 
    alter table db_vers_user_perm 
        add constraint FK75DE6876857EE95E 
        foreign key (user_id) 
        references db_vers_user
14:19:30,136  INFO SchemaExport:405 - HHH000230: Schema export complete
14:19:30,137  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:19:30,137  INFO CustomRunner:139 - Test: testCollectionNoVersion
14:19:30,138 DEBUG SQL:104 - 
    call current_timestamp()
14:19:30,139 DEBUG SQL:104 - 
    insert 
    into
        db_vers_user
        (user_id, ts, user_name) 
    values
        (null, ?, ?)
14:19:30,140 DEBUG SQL:104 - 
    call current_timestamp()
14:19:30,140 DEBUG SQL:104 - 
    insert 
    into
        db_vers_permission
        (perm_id, ts, name, ctx, priv) 
    values
        (null, ?, ?, ?, ?)
14:19:30,141 DEBUG SQL:104 - 
    select
        user0_.user_id as user1_2_0_,
        user0_.ts as ts2_0_,
        user0_.user_name as user3_2_0_ 
    from
        db_vers_user user0_ 
    where
        user0_.user_id=?
14:19:30,147 DEBUG SQL:104 - 
    select
        permission0_.perm_id as perm1_1_0_,
        permission0_.ts as ts1_0_,
        permission0_.name as name1_0_,
        permission0_.ctx as ctx1_0_,
        permission0_.priv as priv1_0_ 
    from
        db_vers_permission permission0_ 
    where
        permission0_.perm_id=?
14:19:30,148 DEBUG SQL:104 - 
    select
        permission0_.user_id as user1_2_1_,
        permission0_.perm_id as perm2_4_1_,
        permission1_.perm_id as perm1_1_0_,
        permission1_.ts as ts1_0_,
        permission1_.name as name1_0_,
        permission1_.ctx as ctx1_0_,
        permission1_.priv as priv1_0_ 
    from
        db_vers_user_perm permission0_ 
    inner join
        db_vers_permission permission1_ 
            on permission0_.perm_id=permission1_.perm_id 
    where
        permission0_.user_id=?
14:19:30,158 DEBUG SQL:104 - 
    insert 
    into
        db_vers_user_perm
        (user_id, perm_id) 
    values
        (?, ?)
14:19:30,159 DEBUG SQL:104 - 
    select
        user0_.user_id as user1_2_0_,
        user0_.ts as ts2_0_,
        user0_.user_name as user3_2_0_ 
    from
        db_vers_user user0_ 
    where
        user0_.user_id=?
14:19:30,160 DEBUG SQL:104 - 
    select
        permission0_.user_id as user1_2_1_,
        permission0_.perm_id as perm2_4_1_,
        permission1_.perm_id as perm1_1_0_,
        permission1_.ts as ts1_0_,
        permission1_.name as name1_0_,
        permission1_.ctx as ctx1_0_,
        permission1_.priv as priv1_0_ 
    from
        db_vers_user_perm permission0_ 
    inner join
        db_vers_permission permission1_ 
            on permission0_.perm_id=permission1_.perm_id 
    where
        permission0_.user_id=?
14:19:30,160 DEBUG SQL:104 - 
    delete 
    from
        db_vers_user_perm 
    where
        user_id=?
14:19:30,161 DEBUG SQL:104 - 
    select
        user0_.user_id as user1_2_0_,
        user0_.ts as ts2_0_,
        user0_.user_name as user3_2_0_ 
    from
        db_vers_user user0_ 
    where
        user0_.user_id=?
14:19:30,161 DEBUG SQL:104 - 
    select
        permission0_.perm_id as perm1_1_0_,
        permission0_.ts as ts1_0_,
        permission0_.name as name1_0_,
        permission0_.ctx as ctx1_0_,
        permission0_.priv as priv1_0_ 
    from
        db_vers_permission permission0_ 
    where
        permission0_.perm_id=?
14:19:30,162 DEBUG SQL:104 - 
    delete 
    from
        db_vers_user_perm 
    where
        user_id=?
14:19:30,171 DEBUG SQL:104 - 
    delete 
    from
        db_vers_user 
    where
        user_id=? 
        and ts=?
14:19:30,172 DEBUG SQL:104 - 
    delete 
    from
        db_vers_permission 
    where
        perm_id=? 
        and ts=?
14:19:30,174  INFO CustomRunner:139 - Test: testCollectionVersion
14:19:30,174 DEBUG SQL:104 - 
    call current_timestamp()
14:19:30,175 DEBUG SQL:104 - 
    insert 
    into
        db_vers_user
        (user_id, ts, user_name) 
    values
        (null, ?, ?)
14:19:30,187 DEBUG SQL:104 - 
    call current_timestamp()
14:19:30,188 DEBUG SQL:104 - 
    insert 
    into
        db_vers_group
        (group_id, ts, name) 
    values
        (null, ?, ?)
14:19:31,689 DEBUG SQL:104 - 
    select
        user0_.user_id as user1_2_0_,
        user0_.ts as ts2_0_,
        user0_.user_name as user3_2_0_ 
    from
        db_vers_user user0_ 
    where
        user0_.user_id=?
14:19:31,690 DEBUG SQL:104 - 
    select
        group0_.group_id as group1_0_0_,
        group0_.ts as ts0_0_,
        group0_.name as name0_0_ 
    from
        db_vers_group group0_ 
    where
        group0_.group_id=?
14:19:31,691 DEBUG SQL:104 - 
    select
        groups0_.user_id as user1_2_1_,
        groups0_.group_id as group2_3_1_,
        group1_.group_id as group1_0_0_,
        group1_.ts as ts0_0_,
        group1_.name as name0_0_ 
    from
        db_vers_user_group groups0_ 
    inner join
        db_vers_group group1_ 
            on groups0_.group_id=group1_.group_id 
    where
        groups0_.user_id=?
14:19:31,692 DEBUG SQL:104 - 
    select
        users0_.group_id as group2_0_1_,
        users0_.user_id as user1_3_1_,
        user1_.user_id as user1_2_0_,
        user1_.ts as ts2_0_,
        user1_.user_name as user3_2_0_ 
    from
        db_vers_user_group users0_ 
    inner join
        db_vers_user user1_ 
            on users0_.user_id=user1_.user_id 
    where
        users0_.group_id=?
14:19:31,692 DEBUG SQL:104 - 
    call current_timestamp()
14:19:31,692 DEBUG SQL:104 - 
    call current_timestamp()
14:19:31,693 DEBUG SQL:104 - 
    update
        db_vers_user 
    set
        ts=?,
        user_name=? 
    where
        user_id=? 
        and ts=?
14:19:31,693 DEBUG SQL:104 - 
    update
        db_vers_group 
    set
        ts=?,
        name=? 
    where
        group_id=? 
        and ts=?
14:19:31,694 DEBUG SQL:104 - 
    insert 
    into
        db_vers_user_group
        (group_id, user_id) 
    values
        (?, ?)
14:19:33,195 DEBUG SQL:104 - 
    select
        user0_.user_id as user1_2_0_,
        user0_.ts as ts2_0_,
        user0_.user_name as user3_2_0_ 
    from
        db_vers_user user0_ 
    where
        user0_.user_id=?
14:19:33,197 DEBUG SQL:104 - 
    call current_timestamp()
14:19:33,197 DEBUG SQL:104 - 
    update
        db_vers_user 
    set
        ts=?,
        user_name=? 
    where
        user_id=? 
        and ts=?
14:19:33,198 DEBUG SQL:104 - 
    select
        user0_.user_id as user1_2_0_,
        user0_.ts as ts2_0_,
        user0_.user_name as user3_2_0_ 
    from
        db_vers_user user0_ 
    where
        user0_.user_id=?
14:19:33,199 DEBUG SQL:104 - 
    select
        group0_.group_id as group1_0_0_,
        group0_.ts as ts0_0_,
        group0_.name as name0_0_ 
    from
        db_vers_group group0_ 
    where
        group0_.group_id=?
14:19:33,199 DEBUG SQL:104 - 
    delete 
    from
        db_vers_user_perm 
    where
        user_id=?
14:19:33,199 DEBUG SQL:104 - 
    delete 
    from
        db_vers_user_group 
    where
        group_id=?
14:19:33,200 DEBUG SQL:104 - 
    delete 
    from
        db_vers_user 
    where
        user_id=? 
        and ts=?
14:19:33,200 DEBUG SQL:104 - 
    delete 
    from
        db_vers_group 
    where
        group_id=? 
        and ts=?
14:19:33,201  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:19:33,202 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:19:33,202 DEBUG SQL:104 - 
    alter table db_vers_user_group 
        drop constraint FK4575B1B957A44E56
14:19:33,202 DEBUG SQL:104 - 
    alter table db_vers_user_group 
        drop constraint FK4575B1B9857EE95E
14:19:33,202 DEBUG SQL:104 - 
    alter table db_vers_user_perm 
        drop constraint FK75DE68768D2EFB1D
14:19:33,202 DEBUG SQL:104 - 
    alter table db_vers_user_perm 
        drop constraint FK75DE6876857EE95E
14:19:33,203 DEBUG SQL:104 - 
    drop table db_vers_group if exists
14:19:33,203 DEBUG SQL:104 - 
    drop table db_vers_permission if exists
14:19:33,203 DEBUG SQL:104 - 
    drop table db_vers_user if exists
14:19:33,204 DEBUG SQL:104 - 
    drop table db_vers_user_group if exists
14:19:33,204 DEBUG SQL:104 - 
    drop table db_vers_user_perm if exists
14:19:33,204  INFO SchemaExport:405 - HHH000230: Schema export complete
14:19:33,204  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
