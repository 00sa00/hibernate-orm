<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.event.collection.BrokenCollectionEventTest" tests="3" time="0.289" timestamp="2013-02-28T20:12:16">
  <properties />
  <testcase classname="org.hibernate.test.event.collection.BrokenCollectionEventTest" name="testSaveParentNullChildren" time="0.076" />
  <testcase classname="org.hibernate.test.event.collection.BrokenCollectionEventTest" name="testUpdateDetachedParentNoChildrenToNull" time="0.045" />
  <testcase classname="org.hibernate.test.event.collection.BrokenCollectionEventTest" name="testUpdateParentNoChildrenToNull" time="0.047" />
  <system-out><![CDATA[14:12:16,791  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.event.collection.BrokenCollectionEventTest
14:12:16,794  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/event/collection/association/unidirectional/onetomany/UnidirectionalOneToManySetMapping.hbm.xml
14:12:16,801  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:12:16,801  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:12:16,802  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:12:16,802  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:12:16,802  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:12:16,803  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:12:16,804  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:12:16,804  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:12:16,805  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:12:16,805  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:12:16,816  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:16,889 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:16,894 DEBUG SQL:104 - 
    alter table CHILD 
        drop constraint FK3D1FCFCDE432097
14:12:16,895 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table CHILD drop constraint FK3D1FCFCDE432097
14:12:16,896 ERROR SchemaExport:426 - Table "CHILD" not found; SQL statement:

    alter table CHILD 
        drop constraint FK3D1FCFCDE432097 [42102-145]
14:12:16,896 DEBUG SQL:104 - 
    drop table CHILD if exists
14:12:16,896 DEBUG SQL:104 - 
    drop table PARENT if exists
14:12:16,896 DEBUG SQL:104 - 
    create table CHILD (
        ID bigint generated by default as identity,
        NAME varchar(255),
        parent_id bigint,
        primary key (ID)
    )
14:12:16,897 DEBUG SQL:104 - 
    create table PARENT (
        ID bigint generated by default as identity,
        primary key (ID)
    )
14:12:16,899 DEBUG SQL:104 - 
    alter table CHILD 
        add constraint FK3D1FCFCDE432097 
        foreign key (parent_id) 
        references PARENT
14:12:16,900  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:16,901  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:12:16,901  INFO CustomRunner:139 - Test: testSaveParentNullChildren
14:12:16,917 DEBUG SQL:104 - 
    insert 
    into
        PARENT
        (ID) 
    values
        (null)
14:12:16,918 DEBUG SQL:104 - 
    select
        this_.ID as ID0_0_,
        this_.NAME as NAME0_0_ 
    from
        CHILD this_
14:12:16,919 DEBUG SQL:104 - 
    select
        this_.ID as ID1_0_ 
    from
        PARENT this_
14:12:16,919 DEBUG SQL:104 - 
    select
        children0_.parent_id as parent3_1_1_,
        children0_.ID as ID0_1_,
        children0_.ID as ID0_0_,
        children0_.NAME as NAME0_0_ 
    from
        CHILD children0_ 
    where
        children0_.parent_id=?
14:12:16,920 DEBUG SQL:104 - 
    delete 
    from
        PARENT 
    where
        ID=?
14:12:16,920  INFO FailureExpectedHandler:73 - Ignoring expected failure [{}] : {}
14:12:16,922  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/event/collection/association/unidirectional/onetomany/UnidirectionalOneToManySetMapping.hbm.xml
14:12:16,928  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:12:16,928  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:12:16,929  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:12:16,929  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:12:16,929  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:12:16,930  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:12:16,965  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:12:16,966  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:12:16,967  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:12:16,967  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:12:16,973  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:16,974 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:16,974 DEBUG SQL:104 - 
    alter table CHILD 
        drop constraint FK3D1FCFCDE432097
14:12:16,974 DEBUG SQL:104 - 
    drop table CHILD if exists
14:12:16,975 DEBUG SQL:104 - 
    drop table PARENT if exists
14:12:16,975 DEBUG SQL:104 - 
    create table CHILD (
        ID bigint generated by default as identity,
        NAME varchar(255),
        parent_id bigint,
        primary key (ID)
    )
14:12:16,975 DEBUG SQL:104 - 
    create table PARENT (
        ID bigint generated by default as identity,
        primary key (ID)
    )
14:12:16,976 DEBUG SQL:104 - 
    alter table CHILD 
        add constraint FK3D1FCFCDE432097 
        foreign key (parent_id) 
        references PARENT
14:12:16,976  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:16,977  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:12:16,977  INFO CustomRunner:139 - Test: testUpdateDetachedParentNoChildrenToNull
14:12:16,982 DEBUG SQL:104 - 
    insert 
    into
        PARENT
        (ID) 
    values
        (null)
14:12:16,984 DEBUG SQL:104 - 
    update
        CHILD 
    set
        parent_id=null 
    where
        parent_id=?
14:12:16,985 DEBUG SQL:104 - 
    select
        this_.ID as ID0_0_,
        this_.NAME as NAME0_0_ 
    from
        CHILD this_
14:12:16,985 DEBUG SQL:104 - 
    select
        this_.ID as ID1_0_ 
    from
        PARENT this_
14:12:16,985 DEBUG SQL:104 - 
    select
        children0_.parent_id as parent3_1_1_,
        children0_.ID as ID0_1_,
        children0_.ID as ID0_0_,
        children0_.NAME as NAME0_0_ 
    from
        CHILD children0_ 
    where
        children0_.parent_id=?
14:12:16,986 DEBUG SQL:104 - 
    delete 
    from
        PARENT 
    where
        ID=?
14:12:16,986  INFO FailureExpectedHandler:73 - Ignoring expected failure [{}] : {}
14:12:16,988  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/event/collection/association/unidirectional/onetomany/UnidirectionalOneToManySetMapping.hbm.xml
14:12:17,006  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:12:17,007  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:12:17,007  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:12:17,007  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:12:17,007  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:12:17,009  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:12:17,009  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:12:17,010  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:12:17,010  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:12:17,010  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:12:17,016  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:17,017 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:17,017 DEBUG SQL:104 - 
    alter table CHILD 
        drop constraint FK3D1FCFCDE432097
14:12:17,017 DEBUG SQL:104 - 
    drop table CHILD if exists
14:12:17,017 DEBUG SQL:104 - 
    drop table PARENT if exists
14:12:17,018 DEBUG SQL:104 - 
    create table CHILD (
        ID bigint generated by default as identity,
        NAME varchar(255),
        parent_id bigint,
        primary key (ID)
    )
14:12:17,019 DEBUG SQL:104 - 
    create table PARENT (
        ID bigint generated by default as identity,
        primary key (ID)
    )
14:12:17,020 DEBUG SQL:104 - 
    alter table CHILD 
        add constraint FK3D1FCFCDE432097 
        foreign key (parent_id) 
        references PARENT
14:12:17,021  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:17,021  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:12:17,022  INFO CustomRunner:139 - Test: testUpdateParentNoChildrenToNull
14:12:17,023 DEBUG SQL:104 - 
    insert 
    into
        PARENT
        (ID) 
    values
        (null)
14:12:17,024 DEBUG SQL:104 - 
    select
        parentwith0_.ID as ID1_0_ 
    from
        PARENT parentwith0_ 
    where
        parentwith0_.ID=?
14:12:17,025 DEBUG SQL:104 - 
    update
        CHILD 
    set
        parent_id=null 
    where
        parent_id=?
14:12:17,026 DEBUG SQL:104 - 
    select
        this_.ID as ID0_0_,
        this_.NAME as NAME0_0_ 
    from
        CHILD this_
14:12:17,026 DEBUG SQL:104 - 
    select
        this_.ID as ID1_0_ 
    from
        PARENT this_
14:12:17,026 DEBUG SQL:104 - 
    select
        children0_.parent_id as parent3_1_1_,
        children0_.ID as ID0_1_,
        children0_.ID as ID0_0_,
        children0_.NAME as NAME0_0_ 
    from
        CHILD children0_ 
    where
        children0_.parent_id=?
14:12:17,027 DEBUG SQL:104 - 
    delete 
    from
        PARENT 
    where
        ID=?
14:12:17,029  INFO FailureExpectedHandler:73 - Ignoring expected failure [{}] : {}
14:12:17,031  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/event/collection/association/unidirectional/onetomany/UnidirectionalOneToManySetMapping.hbm.xml
14:12:17,040  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:12:17,041  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:12:17,041  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:12:17,041  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:12:17,041  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:12:17,042  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:12:17,043  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:12:17,043  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:12:17,043  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:12:17,044  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:12:17,051  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:17,052 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:17,052 DEBUG SQL:104 - 
    alter table CHILD 
        drop constraint FK3D1FCFCDE432097
14:12:17,053 DEBUG SQL:104 - 
    drop table CHILD if exists
14:12:17,053 DEBUG SQL:104 - 
    drop table PARENT if exists
14:12:17,053 DEBUG SQL:104 - 
    create table CHILD (
        ID bigint generated by default as identity,
        NAME varchar(255),
        parent_id bigint,
        primary key (ID)
    )
14:12:17,060 DEBUG SQL:104 - 
    create table PARENT (
        ID bigint generated by default as identity,
        primary key (ID)
    )
14:12:17,061 DEBUG SQL:104 - 
    alter table CHILD 
        add constraint FK3D1FCFCDE432097 
        foreign key (parent_id) 
        references PARENT
14:12:17,061  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:17,068  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:12:17,069  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:17,069 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:17,070 DEBUG SQL:104 - 
    alter table CHILD 
        drop constraint FK3D1FCFCDE432097
14:12:17,070 DEBUG SQL:104 - 
    drop table CHILD if exists
14:12:17,071 DEBUG SQL:104 - 
    drop table PARENT if exists
14:12:17,071  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:17,071  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
