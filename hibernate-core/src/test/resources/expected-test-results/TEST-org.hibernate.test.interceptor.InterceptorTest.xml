<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.interceptor.InterceptorTest" tests="9" time="3.129" timestamp="2013-02-28T20:14:45">
  <properties />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testCollectionIntercept" time="0.005" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testComponentInterceptor" time="0.004" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testInitiateIntercept" time="0.005" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testPrepareStatementFaultIntercept" time="0.002" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testPrepareStatementIntercept" time="0.01" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testPropertyIntercept" time="0.003" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testPropertyIntercept2" time="0.004" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testStatefulIntercept" time="0.008" />
  <testcase classname="org.hibernate.test.interceptor.InterceptorTest" name="testTimeout" time="3.003" />
  <system-out><![CDATA[14:14:45,066  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.interceptor.InterceptorTest
14:14:45,068  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/interceptor/User.hbm.xml
14:14:45,074  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/interceptor/Image.hbm.xml
14:14:45,113  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:14:45,114  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:14:45,114  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:14:45,114  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:14:45,114  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:14:45,115  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:14:45,116  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:14:45,116  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:14:45,116  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:14:45,117  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:14:45,127  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:45,128 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:45,128 DEBUG SQL:104 - 
    alter table users_actions 
        drop constraint FKDFABF5C6488576C9
14:14:45,128 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table users_actions drop constraint FKDFABF5C6488576C9
14:14:45,129 ERROR SchemaExport:426 - Table "USERS_ACTIONS" not found; SQL statement:

    alter table users_actions 
        drop constraint FKDFABF5C6488576C9 [42102-145]
14:14:45,129 DEBUG SQL:104 - 
    drop table image if exists
14:14:45,129 DEBUG SQL:104 - 
    drop table log_entries if exists
14:14:45,129 DEBUG SQL:104 - 
    drop table users if exists
14:14:45,129 DEBUG SQL:104 - 
    drop table users_actions if exists
14:14:45,129 DEBUG SQL:104 - 
    create table image (
        id bigint generated by default as identity,
        permissions bigint not null,
        comment_txt varchar(255),
        name varchar(255) not null,
        primary key (id)
    )
14:14:45,130 DEBUG SQL:104 - 
    create table log_entries (
        id bigint not null,
        entity_name varchar(255),
        entity_id varchar(255),
        action varchar(255),
        action_time timestamp,
        primary key (id)
    )
14:14:45,130 DEBUG SQL:104 - 
    create table users (
        name varchar(255) not null,
        "password" varchar(255),
        lastUpdated timestamp,
        created timestamp,
        primary key (name)
    )
14:14:45,131 DEBUG SQL:104 - 
    create table users_actions (
        user_name varchar(255) not null,
        action varchar(255)
    )
14:14:45,131 DEBUG SQL:104 - 
    alter table users_actions 
        add constraint FKDFABF5C6488576C9 
        foreign key (user_name) 
        references users
14:14:45,132  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:45,132  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:14:45,132  INFO CustomRunner:139 - Test: testCollectionIntercept
14:14:45,135 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:45,136 DEBUG SQL:104 - 
    update
        users 
    set
        "password"=?,
        lastUpdated=?,
        created=? 
    where
        name=?
14:14:45,136 DEBUG SQL:104 - 
    insert 
    into
        users_actions
        (user_name, action) 
    values
        (?, ?)
14:14:45,136 DEBUG SQL:104 - 
    insert 
    into
        users_actions
        (user_name, action) 
    values
        (?, ?)
14:14:45,137 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_,
        actions1_.user_name as user1_2_2_,
        actions1_.action as action3_2_ 
    from
        users user0_ 
    left outer join
        users_actions actions1_ 
            on user0_.name=actions1_.user_name 
    where
        user0_.name=?
14:14:45,137 DEBUG SQL:104 - 
    delete 
    from
        users_actions 
    where
        user_name=?
14:14:45,137 DEBUG SQL:104 - 
    delete 
    from
        users 
    where
        name=?
14:14:45,138  INFO CustomRunner:139 - Test: testComponentInterceptor
14:14:45,140 DEBUG SQL:104 - 
    insert 
    into
        image
        (id, permissions, comment_txt, name) 
    values
        (null, ?, ?, ?)
14:14:45,141 DEBUG SQL:104 - 
    select
        image0_.id as id0_0_,
        image0_.permissions as permissi2_0_0_,
        image0_.comment_txt as comment3_0_0_,
        image0_.name as name0_0_ 
    from
        image image0_ 
    where
        image0_.id=?
14:14:45,141 DEBUG SQL:104 - 
    delete 
    from
        image 
    where
        id=?
14:14:45,142  INFO CustomRunner:139 - Test: testInitiateIntercept
14:14:45,144 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:45,144 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_ 
    from
        users user0_ 
    where
        user0_.name=?
14:14:45,145 DEBUG SQL:104 - 
    select
        actions0_.user_name as user1_2_0_,
        actions0_.action as action3_0_ 
    from
        users_actions actions0_ 
    where
        actions0_.user_name=?
14:14:45,145 DEBUG SQL:104 - 
    update
        users 
    set
        "password"=?,
        lastUpdated=?,
        created=? 
    where
        name=?
14:14:45,146 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_,
        actions1_.user_name as user1_2_2_,
        actions1_.action as action3_2_ 
    from
        users user0_ 
    left outer join
        users_actions actions1_ 
            on user0_.name=actions1_.user_name 
    where
        user0_.name=?
14:14:45,146 DEBUG SQL:104 - 
    delete 
    from
        users 
    where
        name=?
14:14:45,147  INFO CustomRunner:139 - Test: testPrepareStatementFaultIntercept
14:14:45,149 ERROR AssertionFailure:43 - HHH000099: an assertion failure occured (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: Interceptor.onPrepareStatement() returned null or empty string.
14:14:45,149  INFO CustomRunner:139 - Test: testPrepareStatementIntercept
14:14:45,153 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:45,154 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_,
        actions1_.user_name as user1_2_2_,
        actions1_.action as action3_2_ 
    from
        users user0_ 
    left outer join
        users_actions actions1_ 
            on user0_.name=actions1_.user_name 
    where
        user0_.name=?
14:14:45,154 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.interceptor.User u
14:14:45,155 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          \-[RANGE] Node: 'RANGE'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[DOT] Node: '.'
             |  |  |  |  +-[IDENT] Node: 'org'
             |  |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  |  \-[IDENT] Node: 'test'
             |  |  \-[IDENT] Node: 'interceptor'
             |  \-[IDENT] Node: 'User'
             \-[ALIAS] Node: 'u'

14:14:45,155 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:45,155 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.interceptor.User (u) -> user0_
14:14:45,155 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} users user0_ ) )
14:14:45,156 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:14:45,156 DEBUG JoinProcessor:175 - Using FROM fragment [users user0_]
14:14:45,156 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (users)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'user0_.name as name2_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=u,role=null,tableName=users,tableAlias=user0_,origin=null,columns={,className=org.hibernate.test.interceptor.User}}}
    |  \-[SQL_TOKEN] SqlFragment: 'user0_."password" as password2_2_, user0_.lastUpdated as lastUpda3_2_, user0_.created as created2_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[u], fromElementByTableAlias=[user0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'users user0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=u,role=null,tableName=users,tableAlias=user0_,origin=null,columns={,className=org.hibernate.test.interceptor.User}}

14:14:45,156 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:45,156 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.interceptor.User u
14:14:45,156 DEBUG QueryTranslatorImpl:236 - SQL: select user0_.name as name2_, user0_."password" as password2_2_, user0_.lastUpdated as lastUpda3_2_, user0_.created as created2_ from users user0_
14:14:45,156 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:45,157 DEBUG SQL:104 - 
    select
        user0_.name as name2_,
        user0_."password" as password2_2_,
        user0_.lastUpdated as lastUpda3_2_,
        user0_.created as created2_ 
    from
        users user0_
14:14:45,157 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_ 
    from
        users user0_ 
    where
        user0_.name=?
14:14:45,158 DEBUG SQL:104 - 
    select
        actions0_.user_name as user1_2_0_,
        actions0_.action as action3_0_ 
    from
        users_actions actions0_ 
    where
        actions0_.user_name=?
14:14:45,159 DEBUG SQL:104 - 
    update
        users 
    set
        "password"=?,
        lastUpdated=?,
        created=? 
    where
        name=?
14:14:45,159 DEBUG SQL:104 - 
    select
        user_.name,
        user_."password" as password2_2_,
        user_.lastUpdated as lastUpda3_2_,
        user_.created as created2_ 
    from
        users user_ 
    where
        user_.name=?
14:14:45,160 DEBUG SQL:104 - 
    delete 
    from
        users 
    where
        name=?
14:14:45,160  INFO CustomRunner:139 - Test: testPropertyIntercept
14:14:45,162 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:45,163 DEBUG SQL:104 - 
    update
        users 
    set
        "password"=?,
        lastUpdated=?,
        created=? 
    where
        name=?
14:14:45,163 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_,
        actions1_.user_name as user1_2_2_,
        actions1_.action as action3_2_ 
    from
        users user0_ 
    left outer join
        users_actions actions1_ 
            on user0_.name=actions1_.user_name 
    where
        user0_.name=?
14:14:45,164 DEBUG SQL:104 - 
    delete 
    from
        users 
    where
        name=?
14:14:45,164  INFO CustomRunner:139 - Test: testPropertyIntercept2
14:14:45,165 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:45,166 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_,
        actions1_.user_name as user1_2_2_,
        actions1_.action as action3_2_ 
    from
        users user0_ 
    left outer join
        users_actions actions1_ 
            on user0_.name=actions1_.user_name 
    where
        user0_.name=?
14:14:45,168 DEBUG SQL:104 - 
    select
        user0_.name as name2_0_,
        user0_."password" as password2_2_0_,
        user0_.lastUpdated as lastUpda3_2_0_,
        user0_.created as created2_0_,
        actions1_.user_name as user1_2_2_,
        actions1_.action as action3_2_ 
    from
        users user0_ 
    left outer join
        users_actions actions1_ 
            on user0_.name=actions1_.user_name 
    where
        user0_.name=?
14:14:45,168 DEBUG SQL:104 - 
    delete 
    from
        users 
    where
        name=?
14:14:45,169  INFO CustomRunner:139 - Test: testStatefulIntercept
14:14:45,171 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:45,172 DEBUG SQL:104 - 
    update
        users 
    set
        "password"=?,
        lastUpdated=?,
        created=? 
    where
        name=?
14:14:45,172 DEBUG SQL:104 - 
    select
        max(id) 
    from
        log_entries
14:14:45,172 DEBUG SQL:104 - 
    insert 
    into
        log_entries
        (entity_name, entity_id, action, action_time, id) 
    values
        (?, ?, ?, ?, ?)
14:14:45,173 DEBUG SQL:104 - 
    insert 
    into
        log_entries
        (entity_name, entity_id, action, action_time, id) 
    values
        (?, ?, ?, ?, ?)
14:14:45,173 DEBUG SQL:104 - 
    select
        this_.id as id1_0_,
        this_.entity_name as entity2_1_0_,
        this_.entity_id as entity3_1_0_,
        this_.action as action1_0_,
        this_.action_time as action5_1_0_ 
    from
        log_entries this_
14:14:45,174 DEBUG SQL:104 - 
    select
        user_.name,
        user_."password" as password2_2_,
        user_.lastUpdated as lastUpda3_2_,
        user_.created as created2_ 
    from
        users user_ 
    where
        user_.name=?
14:14:45,174 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete from org.hibernate.test.interceptor.Log
14:14:45,175 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[IDENT] Node: 'org'
             |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  \-[IDENT] Node: 'test'
             |  \-[IDENT] Node: 'interceptor'
             \-[IDENT] Node: 'Log'

14:14:45,175 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:45,175 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.interceptor.Log (<no alias>) -> log0_
14:14:45,175 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (log_entries)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[log0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'log_entries' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=log_entries,tableAlias=log0_,origin=null,columns={,className=org.hibernate.test.interceptor.Log}}

14:14:45,175 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:45,176 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:45,176 DEBUG SQL:104 - 
    delete 
    from
        log_entries
14:14:45,176 DEBUG SQL:104 - 
    delete 
    from
        users 
    where
        name=?
14:14:45,177  INFO CustomRunner:139 - Test: testTimeout
14:14:48,179 DEBUG SQL:104 - 
    insert 
    into
        users
        ("password", lastUpdated, created, name) 
    values
        (?, ?, ?, ?)
14:14:48,181  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:48,181 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:48,182 DEBUG SQL:104 - 
    alter table users_actions 
        drop constraint FKDFABF5C6488576C9
14:14:48,182 DEBUG SQL:104 - 
    drop table image if exists
14:14:48,182 DEBUG SQL:104 - 
    drop table log_entries if exists
14:14:48,183 DEBUG SQL:104 - 
    drop table users if exists
14:14:48,183 DEBUG SQL:104 - 
    drop table users_actions if exists
14:14:48,183  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:48,183  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
