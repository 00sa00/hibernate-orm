<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.locking.LockModeTest" tests="5" time="12.288" timestamp="2013-02-28T20:17:14">
  <properties />
  <testcase classname="org.hibernate.test.locking.LockModeTest" name="testLegacyCriteria" time="3.05" />
  <testcase classname="org.hibernate.test.locking.LockModeTest" name="testLegacyCriteriaAliasSpecific" time="3.005" />
  <testcase classname="org.hibernate.test.locking.LockModeTest" name="testLoading" time="3.007" />
  <testcase classname="org.hibernate.test.locking.LockModeTest" name="testQuery" time="3.01" />
  <testcase classname="org.hibernate.test.locking.LockModeTest" name="testQueryUsingLockOptions" time="0.006" />
  <system-out><![CDATA[14:17:14,217  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.locking.LockModeTest
14:17:14,232  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:17:14,233  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:17:14,233  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:17:14,233  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:17:14,233  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:17:14,235  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:17:14,235  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:17:14,236  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:17:14,236  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:17:14,236  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:17:14,242  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:17:14,243 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:17:14,243 DEBUG SQL:104 - 
    drop table T_LOCK_A if exists
14:17:14,243 DEBUG SQL:104 - 
    create table T_LOCK_A (
        id bigint not null,
        value varchar(255),
        primary key (id)
    )
14:17:14,243  INFO SchemaExport:405 - HHH000230: Schema export complete
14:17:14,244  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:17:14,244  INFO CustomRunner:139 - Test: testLegacyCriteria
14:17:14,245 DEBUG SQL:104 - 
    select
        max(id) 
    from
        T_LOCK_A
14:17:14,246 DEBUG SQL:104 - 
    insert 
    into
        T_LOCK_A
        (value, id) 
    values
        (?, ?)
14:17:14,247 DEBUG SQL:104 - 
    select
        this_.id as id0_0_,
        this_.value as value0_0_ 
    from
        T_LOCK_A this_ for update
            
14:17:14,251 DEBUG SQL:104 - 
    select
        a0_.id as id0_0_,
        a0_.value as value0_0_ 
    from
        T_LOCK_A a0_ 
    where
        a0_.id=? for update
            
14:17:16,253  WARN SqlExceptionHelper:143 - SQL Error: 50200, SQLState: HYT00
14:17:16,253 ERROR SqlExceptionHelper:144 - Timeout trying to lock table "T_LOCK_A"; SQL statement:
select a0_.id as id0_0_, a0_.value as value0_0_ from T_LOCK_A a0_ where a0_.id=? for update [50200-145]
14:17:16,253  INFO DefaultLoadEventListener:158 - HHH000327: Error performing load command : org.hibernate.PessimisticLockException: could not extract ResultSet
14:17:17,254 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete from org.hibernate.test.locking.A
14:17:17,291 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[IDENT] Node: 'org'
             |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  \-[IDENT] Node: 'test'
             |  \-[IDENT] Node: 'locking'
             \-[IDENT] Node: 'A'

14:17:17,292 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:17:17,292 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.locking.A (<no alias>) -> a0_
14:17:17,293 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (T_LOCK_A)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[a0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'T_LOCK_A' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=T_LOCK_A,tableAlias=a0_,origin=null,columns={,className=org.hibernate.test.locking.A}}

14:17:17,293 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:17:17,293 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:17:17,293 DEBUG SQL:104 - 
    delete 
    from
        T_LOCK_A
14:17:17,294  INFO CustomRunner:139 - Test: testLegacyCriteriaAliasSpecific
14:17:17,295 DEBUG SQL:104 - 
    insert 
    into
        T_LOCK_A
        (value, id) 
    values
        (?, ?)
14:17:17,296 DEBUG SQL:104 - 
    select
        this_.id as id0_0_,
        this_.value as value0_0_ 
    from
        T_LOCK_A this_ for update
            
14:17:17,297 DEBUG SQL:104 - 
    select
        a0_.id as id0_0_,
        a0_.value as value0_0_ 
    from
        T_LOCK_A a0_ 
    where
        a0_.id=? for update
            
14:17:19,298  WARN SqlExceptionHelper:143 - SQL Error: 50200, SQLState: HYT00
14:17:19,298 ERROR SqlExceptionHelper:144 - Timeout trying to lock table "T_LOCK_A"; SQL statement:
select a0_.id as id0_0_, a0_.value as value0_0_ from T_LOCK_A a0_ where a0_.id=? for update [50200-145]
14:17:19,299  INFO DefaultLoadEventListener:158 - HHH000327: Error performing load command : org.hibernate.PessimisticLockException: could not extract ResultSet
14:17:20,299 DEBUG SQL:104 - 
    delete 
    from
        T_LOCK_A
14:17:20,301  INFO CustomRunner:139 - Test: testLoading
14:17:20,302 DEBUG SQL:104 - 
    insert 
    into
        T_LOCK_A
        (value, id) 
    values
        (?, ?)
14:17:20,302 DEBUG SQL:104 - 
    select
        a0_.id as id0_0_,
        a0_.value as value0_0_ 
    from
        T_LOCK_A a0_ 
    where
        a0_.id=? for update
            
14:17:20,303 DEBUG SQL:104 - 
    select
        a0_.id as id0_0_,
        a0_.value as value0_0_ 
    from
        T_LOCK_A a0_ 
    where
        a0_.id=? for update
            
14:17:22,305  WARN SqlExceptionHelper:143 - SQL Error: 50200, SQLState: HYT00
14:17:22,306 ERROR SqlExceptionHelper:144 - Timeout trying to lock table "T_LOCK_A"; SQL statement:
select a0_.id as id0_0_, a0_.value as value0_0_ from T_LOCK_A a0_ where a0_.id=? for update [50200-145]
14:17:22,306  INFO DefaultLoadEventListener:158 - HHH000327: Error performing load command : org.hibernate.PessimisticLockException: could not extract ResultSet
14:17:23,307 DEBUG SQL:104 - 
    delete 
    from
        T_LOCK_A
14:17:23,308  INFO CustomRunner:139 - Test: testQuery
14:17:23,309 DEBUG SQL:104 - 
    insert 
    into
        T_LOCK_A
        (value, id) 
    values
        (?, ?)
14:17:23,310 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.locking.A a
14:17:23,311 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          \-[RANGE] Node: 'RANGE'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[DOT] Node: '.'
             |  |  |  |  +-[IDENT] Node: 'org'
             |  |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  |  \-[IDENT] Node: 'test'
             |  |  \-[IDENT] Node: 'locking'
             |  \-[IDENT] Node: 'A'
             \-[ALIAS] Node: 'a'

14:17:23,311 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:17:23,311 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.locking.A (a) -> a0_
14:17:23,311 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} T_LOCK_A a0_ ) )
14:17:23,312 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:17:23,312 DEBUG JoinProcessor:175 - Using FROM fragment [T_LOCK_A a0_]
14:17:23,312 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (T_LOCK_A)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'a0_.id as id0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=T_LOCK_A,tableAlias=a0_,origin=null,columns={,className=org.hibernate.test.locking.A}}}
    |  \-[SQL_TOKEN] SqlFragment: 'a0_.value as value0_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[a], fromElementByTableAlias=[a0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'T_LOCK_A a0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=T_LOCK_A,tableAlias=a0_,origin=null,columns={,className=org.hibernate.test.locking.A}}

14:17:23,312 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:17:23,312 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.locking.A a
14:17:23,312 DEBUG QueryTranslatorImpl:236 - SQL: select a0_.id as id0_, a0_.value as value0_ from T_LOCK_A a0_
14:17:23,312 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:17:23,313 DEBUG SQL:104 - 
    select
        a0_.id as id0_,
        a0_.value as value0_ 
    from
        T_LOCK_A a0_ for update
            
14:17:23,314 DEBUG SQL:104 - 
    select
        a0_.id as id0_0_,
        a0_.value as value0_0_ 
    from
        T_LOCK_A a0_ 
    where
        a0_.id=? for update
            
14:17:25,315  WARN SqlExceptionHelper:143 - SQL Error: 50200, SQLState: HYT00
14:17:25,316 ERROR SqlExceptionHelper:144 - Timeout trying to lock table "T_LOCK_A"; SQL statement:
select a0_.id as id0_0_, a0_.value as value0_0_ from T_LOCK_A a0_ where a0_.id=? for update [50200-145]
14:17:25,316  INFO DefaultLoadEventListener:158 - HHH000327: Error performing load command : org.hibernate.PessimisticLockException: could not extract ResultSet
14:17:26,317 DEBUG SQL:104 - 
    delete 
    from
        T_LOCK_A
14:17:26,318  INFO CustomRunner:139 - Test: testQueryUsingLockOptions
14:17:26,320 DEBUG SQL:104 - 
    insert 
    into
        T_LOCK_A
        (value, id) 
    values
        (?, ?)
14:17:26,321 DEBUG SQL:104 - 
    select
        a0_.id as id0_,
        a0_.value as value0_ 
    from
        T_LOCK_A a0_ for update
            
14:17:26,322 DEBUG SQL:104 - 
    select
        a0_.id as id0_,
        a0_.value as value0_ 
    from
        T_LOCK_A a0_
14:17:26,323 DEBUG SQL:104 - 
    delete 
    from
        T_LOCK_A
14:17:26,324  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:17:26,325 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:17:26,325 DEBUG SQL:104 - 
    drop table T_LOCK_A if exists
14:17:26,325  INFO SchemaExport:405 - HHH000230: Schema export complete
14:17:26,325  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
