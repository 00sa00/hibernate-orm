<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.annotations.uniqueconstraint.UniqueConstraintTest" tests="2" time="0.091" timestamp="2013-02-28T20:10:44">
  <properties />
  <testcase classname="org.hibernate.test.annotations.uniqueconstraint.UniqueConstraintTest" name="testUnNamedConstraints" time="0.002" />
  <testcase classname="org.hibernate.test.annotations.uniqueconstraint.UniqueConstraintTest" name="testUniquenessConstraintWithSuperclassProperty" time="0.013" />
  <system-out><![CDATA[14:10:44,827  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.annotations.uniqueconstraint.UniqueConstraintTest
14:10:44,833  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:10:44,834  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:10:44,834  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:10:44,834  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:10:44,834  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:10:44,835  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:10:44,836  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:10:44,836  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:10:44,837  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:10:44,837  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:10:44,848  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:10:44,849 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:10:44,849 DEBUG SQL:104 - 
    alter table House 
        drop constraint FK42AD700CBBFCEBA
14:10:44,849 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table House drop constraint FK42AD700CBBFCEBA
14:10:44,849 ERROR SchemaExport:426 - Table "HOUSE" not found; SQL statement:

    alter table House 
        drop constraint FK42AD700CBBFCEBA [42102-145]
14:10:44,850 DEBUG SQL:104 - 
    drop table House if exists
14:10:44,850 DEBUG SQL:104 - 
    drop table Room if exists
14:10:44,850 DEBUG SQL:104 - 
    drop table UniqueNoNameA if exists
14:10:44,850 DEBUG SQL:104 - 
    drop table UniqueNoNameB if exists
14:10:44,850 DEBUG SQL:104 - 
    drop sequence hibernate_sequence
14:10:44,850 ERROR SchemaExport:425 - HHH000389: Unsuccessful: drop sequence hibernate_sequence
14:10:44,850 ERROR SchemaExport:426 - Sequence "HIBERNATE_SEQUENCE" not found; SQL statement:

    drop sequence hibernate_sequence [90036-145]
14:10:44,850 DEBUG SQL:104 - 
    create table House (
        id bigint not null,
        height bigint,
        cost integer,
        room_id bigint,
        primary key (id)
    )
14:10:44,851 DEBUG SQL:104 - 
    create table Room (
        id bigint not null,
        name varchar(255),
        primary key (id)
    )
14:10:44,851 DEBUG SQL:104 - 
    create table UniqueNoNameA (
        id bigint not null,
        name varchar(255),
        primary key (id)
    )
14:10:44,866 DEBUG SQL:104 - 
    create table UniqueNoNameB (
        id bigint not null,
        name varchar(255),
        primary key (id)
    )
14:10:44,867 DEBUG SQL:104 - 
    alter table House 
        add constraint uniqueWithInherited unique (room_id, cost)
14:10:44,867 DEBUG SQL:104 - 
    alter table House 
        add constraint FK42AD700CBBFCEBA 
        foreign key (room_id) 
        references Room
14:10:44,867 DEBUG SQL:104 - 
    alter table UniqueNoNameA 
        add constraint UK_UniqueNoNameA_1 unique (name)
14:10:44,868 DEBUG SQL:104 - 
    alter table UniqueNoNameB 
        add constraint UK_UniqueNoNameB_1 unique (name)
14:10:44,868 DEBUG SQL:104 - 
    create sequence hibernate_sequence start with 1 increment by 1
14:10:44,868  INFO SchemaExport:405 - HHH000230: Schema export complete
14:10:44,869  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:10:44,869  INFO CustomRunner:139 - Test: testUnNamedConstraints
14:10:44,871  INFO CustomRunner:139 - Test: testUniquenessConstraintWithSuperclassProperty
14:10:44,884 DEBUG SQL:104 - 
    insert 
    into
        Room
        (name, id) 
    values
        (?, ?)
14:10:44,886 DEBUG SQL:104 - 
    insert 
    into
        House
        (height, room_id, cost, id) 
    values
        (?, ?, ?, ?)
14:10:44,886 DEBUG SQL:104 - 
    insert 
    into
        House
        (height, room_id, cost, id) 
    values
        (?, ?, ?, ?)
14:10:44,886  WARN SqlExceptionHelper:143 - SQL Error: 23001, SQLState: 23001
14:10:44,886 ERROR SqlExceptionHelper:144 - Unique index or primary key violation: "UNIQUEWITHINHERITED_INDEX_4 ON PUBLIC.HOUSE(ROOM_ID, COST)"; SQL statement:
insert into House (height, room_id, cost, id) values (?, ?, ?, ?) [23001-145]
14:10:44,887  INFO AbstractBatchImpl:195 - HHH000010: On release of batch it still contained JDBC statements
14:10:44,896  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:10:44,897 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:10:44,897 DEBUG SQL:104 - 
    alter table House 
        drop constraint FK42AD700CBBFCEBA
14:10:44,897 DEBUG SQL:104 - 
    drop table House if exists
14:10:44,897 DEBUG SQL:104 - 
    drop table Room if exists
14:10:44,898 DEBUG SQL:104 - 
    drop table UniqueNoNameA if exists
14:10:44,898 DEBUG SQL:104 - 
    drop table UniqueNoNameB if exists
14:10:44,898 DEBUG SQL:104 - 
    drop sequence hibernate_sequence
14:10:44,898  INFO SchemaExport:405 - HHH000230: Schema export complete
14:10:44,916  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
