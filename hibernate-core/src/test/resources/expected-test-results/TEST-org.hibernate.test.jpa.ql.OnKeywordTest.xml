<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.jpa.ql.OnKeywordTest" tests="1" time="0.044" timestamp="2013-02-28T20:14:51">
  <properties />
  <testcase classname="org.hibernate.test.jpa.ql.OnKeywordTest" name="basicTest" time="0.007" />
  <system-out><![CDATA[14:14:51,974  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.jpa.ql.OnKeywordTest
14:14:51,976  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/jpa/Part.hbm.xml
14:14:51,980  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/jpa/Item.hbm.xml
14:14:51,985  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/jpa/MyEntity.hbm.xml
14:14:51,990  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:14:51,991  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:14:51,991  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:14:51,991  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:14:51,991  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:14:51,992  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:14:51,992  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:14:51,993  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:14:51,993  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:14:52,001  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:52,002 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:52,002 DEBUG SQL:104 - 
    alter table EJB3_PART 
        drop constraint FKFD4B66FC2A89F363
14:14:52,003 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table EJB3_PART drop constraint FKFD4B66FC2A89F363
14:14:52,003 ERROR SchemaExport:426 - Table "EJB3_PART" not found; SQL statement:

    alter table EJB3_PART 
        drop constraint FKFD4B66FC2A89F363 [42102-145]
14:14:52,003 DEBUG SQL:104 - 
    alter table JPA_MYENTITY 
        drop constraint FKE9D28493C4B8BDC8
14:14:52,003 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table JPA_MYENTITY drop constraint FKE9D28493C4B8BDC8
14:14:52,003 ERROR SchemaExport:426 - Table "JPA_MYENTITY" not found; SQL statement:

    alter table JPA_MYENTITY 
        drop constraint FKE9D28493C4B8BDC8 [42102-145]
14:14:52,003 DEBUG SQL:104 - 
    drop table EJB3_ITEM if exists
14:14:52,003 DEBUG SQL:104 - 
    drop table EJB3_PART if exists
14:14:52,004 DEBUG SQL:104 - 
    drop table JPA_MYENTITY if exists
14:14:52,004 DEBUG SQL:104 - 
    create table EJB3_ITEM (
        ITEM_ID bigint not null,
        VERS bigint not null,
        NAME varchar(255) not null,
        primary key (ITEM_ID)
    )
14:14:52,004 DEBUG SQL:104 - 
    create table EJB3_PART (
        PART_ID bigint not null,
        ITEM_ID bigint not null,
        NAME varchar(255) not null,
        STOCK_NUM varchar(255) not null,
        UNIT_PRICE decimal(19,2) not null,
        primary key (PART_ID)
    )
14:14:52,004 DEBUG SQL:104 - 
    create table JPA_MYENTITY (
        ID bigint not null,
        "TYPE" varchar(255) not null,
        name varchar(255),
        other bigint,
        someSubProperty varchar(255),
        primary key (ID)
    )
14:14:52,005 DEBUG SQL:104 - 
    alter table EJB3_PART 
        add constraint FKFD4B66FC2A89F363 
        foreign key (ITEM_ID) 
        references EJB3_ITEM
14:14:52,005 DEBUG SQL:104 - 
    alter table JPA_MYENTITY 
        add constraint FKE9D28493C4B8BDC8 
        foreign key (other) 
        references JPA_MYENTITY
14:14:52,006  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:52,006  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:14:52,007  INFO CustomRunner:139 - Test: basicTest
14:14:52,008 DEBUG QueryTranslatorImpl:265 - parse() - HQL: select i from org.hibernate.test.jpa.Item i join i.parts p on p.unitPrice > :filterPrice
14:14:52,009 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       +-[FROM] Node: 'from'
       |  +-[RANGE] Node: 'RANGE'
       |  |  +-[DOT] Node: '.'
       |  |  |  +-[DOT] Node: '.'
       |  |  |  |  +-[DOT] Node: '.'
       |  |  |  |  |  +-[DOT] Node: '.'
       |  |  |  |  |  |  +-[IDENT] Node: 'org'
       |  |  |  |  |  |  \-[IDENT] Node: 'hibernate'
       |  |  |  |  |  \-[IDENT] Node: 'test'
       |  |  |  |  \-[IDENT] Node: 'jpa'
       |  |  |  \-[IDENT] Node: 'Item'
       |  |  \-[ALIAS] Node: 'i'
       |  \-[JOIN] Node: 'join'
       |     +-[DOT] Node: '.'
       |     |  +-[IDENT] Node: 'i'
       |     |  \-[IDENT] Node: 'parts'
       |     +-[ALIAS] Node: 'p'
       |     \-[WITH] Node: 'with'
       |        \-[GT] Node: '>'
       |           +-[DOT] Node: '.'
       |           |  +-[IDENT] Node: 'p'
       |           |  \-[IDENT] Node: 'unitPrice'
       |           \-[COLON] Node: ':'
       |              \-[IDENT] Node: 'filterPrice'
       \-[SELECT] Node: 'select'
          \-[IDENT] Node: 'i'

14:14:52,009 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:52,009 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.jpa.Item (i) -> item0_
14:14:52,009 DEBUG FromReferenceNode:74 - Resolved : i -> item0_.ITEM_ID
14:14:52,009 DEBUG DotNode:599 - getDataType() : parts -> org.hibernate.type.SetType(org.hibernate.test.jpa.Item.parts)
14:14:52,010 DEBUG FromElementFactory:376 - createEntityAssociation() : One to many - path = i.parts role = org.hibernate.test.jpa.Item.parts associatedEntityName = org.hibernate.test.jpa.Part
14:14:52,010 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.jpa.Part (p) -> parts1_
14:14:52,010 DEBUG FromClause:282 - addJoinByPathMap() : i.parts -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=p,role=null,tableName=EJB3_PART,tableAlias=parts1_,origin=EJB3_ITEM item0_,columns={item0_.ITEM_ID ,className=org.hibernate.test.jpa.Part}}
14:14:52,010 DEBUG DotNode:308 - dereferenceCollection() : Created new FROM element for i.parts : EJB3_PART parts1_
14:14:52,010 DEBUG FromReferenceNode:74 - Resolved : i.parts -> .
14:14:52,010 DEBUG FromReferenceNode:74 - Resolved : p -> parts1_.PART_ID
14:14:52,010 DEBUG DotNode:599 - getDataType() : unitPrice -> org.hibernate.type.BigDecimalType@3bb4a749
14:14:52,010 DEBUG FromReferenceNode:74 - Resolved : p.unitPrice -> parts1_.UNIT_PRICE
14:14:52,011 DEBUG HqlSqlWalker:411 - handleWithFragment() : -- with clause --
 \-[WITH] SqlNode: 'with'
    \-[GT] BinaryLogicOperatorNode: '>'
       +-[DOT] DotNode: 'parts1_.UNIT_PRICE' {propertyName=unitPrice,dereferenceType=ALL,propertyPath=unitPrice,path=p.unitPrice,tableAlias=parts1_,className=org.hibernate.test.jpa.Part,classAlias=p}
       |  +-[ALIAS_REF] IdentNode: 'parts1_.PART_ID' {alias=p, className=org.hibernate.test.jpa.Part, tableAlias=parts1_}
       |  \-[IDENT] IdentNode: 'unitPrice' {originalText=unitPrice}
       \-[NAMED_PARAM] ParameterNode: '?' {name=filterPrice, expectedType=org.hibernate.type.BigDecimalType@3bb4a749}

14:14:52,011 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'EJB3_PART parts1_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=p,role=org.hibernate.test.jpa.Item.parts,tableName=EJB3_PART,tableAlias=parts1_,origin=EJB3_ITEM item0_,columns={item0_.ITEM_ID ,className=org.hibernate.test.jpa.Part}}

14:14:52,011 DEBUG FromReferenceNode:74 - Resolved : i -> item0_.ITEM_ID
14:14:52,011 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( {select clause} item0_.ITEM_ID ) ( FromClause{level=1} ( EJB3_ITEM item0_ EJB3_PART parts1_ ) ) )
14:14:52,011 DEBUG JoinProcessor:175 - Using FROM fragment [EJB3_ITEM item0_]
14:14:52,011 DEBUG JoinProcessor:175 - Using FROM fragment [inner join EJB3_PART parts1_ on item0_.ITEM_ID=parts1_.ITEM_ID and (parts1_.UNIT_PRICE>?)]
14:14:52,012 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (EJB3_ITEM,EJB3_PART)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'item0_.ITEM_ID as ITEM1_0_' {alias=i, className=org.hibernate.test.jpa.Item, tableAlias=item0_}
    |  \-[SQL_TOKEN] SqlFragment: 'item0_.VERS as VERS0_, item0_.NAME as NAME0_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=2, fromElementByClassAlias=[p, i], fromElementByTableAlias=[item0_, parts1_], fromElementsByPath=[i.parts], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'EJB3_ITEM item0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=i,role=null,tableName=EJB3_ITEM,tableAlias=item0_,origin=null,columns={,className=org.hibernate.test.jpa.Item}}
          \-[JOIN_FRAGMENT] FromElement: 'inner join EJB3_PART parts1_ on item0_.ITEM_ID=parts1_.ITEM_ID and (parts1_.UNIT_PRICE>?)' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=p,role=org.hibernate.test.jpa.Item.parts,tableName=EJB3_PART,tableAlias=parts1_,origin=EJB3_ITEM item0_,columns={item0_.ITEM_ID ,className=org.hibernate.test.jpa.Part}}

14:14:52,012 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:52,012 DEBUG QueryTranslatorImpl:235 - HQL: select i from org.hibernate.test.jpa.Item i join i.parts p on p.unitPrice > :filterPrice
14:14:52,012 DEBUG QueryTranslatorImpl:236 - SQL: select item0_.ITEM_ID as ITEM1_0_, item0_.VERS as VERS0_, item0_.NAME as NAME0_ from EJB3_ITEM item0_ inner join EJB3_PART parts1_ on item0_.ITEM_ID=parts1_.ITEM_ID and (parts1_.UNIT_PRICE>?)
14:14:52,012 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:52,012 DEBUG SQL:104 - 
    select
        item0_.ITEM_ID as ITEM1_0_,
        item0_.VERS as VERS0_,
        item0_.NAME as NAME0_ 
    from
        EJB3_ITEM item0_ 
    inner join
        EJB3_PART parts1_ 
            on item0_.ITEM_ID=parts1_.ITEM_ID 
            and (
                parts1_.UNIT_PRICE>?
            )
14:14:52,015  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:52,016 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:52,016 DEBUG SQL:104 - 
    alter table EJB3_PART 
        drop constraint FKFD4B66FC2A89F363
14:14:52,016 DEBUG SQL:104 - 
    alter table JPA_MYENTITY 
        drop constraint FKE9D28493C4B8BDC8
14:14:52,016 DEBUG SQL:104 - 
    drop table EJB3_ITEM if exists
14:14:52,017 DEBUG SQL:104 - 
    drop table EJB3_PART if exists
14:14:52,017 DEBUG SQL:104 - 
    drop table JPA_MYENTITY if exists
14:14:52,017  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:52,017  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
