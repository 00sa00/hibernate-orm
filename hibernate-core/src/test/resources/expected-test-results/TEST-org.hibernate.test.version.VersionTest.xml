<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.version.VersionTest" tests="3" time="0.15" timestamp="2013-02-28T20:19:29">
  <properties />
  <testcase classname="org.hibernate.test.version.VersionTest" name="testCollectionNoVersion" time="0.017" />
  <testcase classname="org.hibernate.test.version.VersionTest" name="testCollectionVersion" time="0.038" />
  <testcase classname="org.hibernate.test.version.VersionTest" name="testVersionShortCircuitFlush" time="0.034" />
  <system-out><![CDATA[14:19:29,938  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.version.VersionTest
14:19:29,940  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/version/PersonThing.hbm.xml
14:19:29,956  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:19:29,957  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:19:29,957  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:19:29,957  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:19:29,957  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:19:29,958  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:19:29,959  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:19:29,959  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:19:29,960  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:19:29,960  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:19:29,969  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:19:29,970 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:19:29,970 DEBUG SQL:104 - 
    alter table Task 
        drop constraint FK27A9A5971F0456
14:19:29,970 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Task drop constraint FK27A9A5971F0456
14:19:29,970 ERROR SchemaExport:426 - Table "TASK" not found; SQL statement:

    alter table Task 
        drop constraint FK27A9A5971F0456 [42102-145]
14:19:29,970 DEBUG SQL:104 - 
    alter table Thing 
        drop constraint FK4D094CE971F0456
14:19:29,971 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Thing drop constraint FK4D094CE971F0456
14:19:29,971 ERROR SchemaExport:426 - Table "THING" not found; SQL statement:

    alter table Thing 
        drop constraint FK4D094CE971F0456 [42102-145]
14:19:29,971 DEBUG SQL:104 - 
    drop table Person if exists
14:19:29,971 DEBUG SQL:104 - 
    drop table Task if exists
14:19:29,971 DEBUG SQL:104 - 
    drop table Thing if exists
14:19:29,971 DEBUG SQL:104 - 
    create table Person (
        name varchar(255) not null,
        version integer not null,
        primary key (name)
    )
14:19:29,972 DEBUG SQL:104 - 
    create table Task (
        description varchar(255) not null,
        version integer not null,
        person varchar(255),
        primary key (description)
    )
14:19:29,972 DEBUG SQL:104 - 
    create table Thing (
        description varchar(255) not null,
        version integer not null,
        longDescription varchar(255),
        person varchar(255),
        primary key (description)
    )
14:19:29,972 DEBUG SQL:104 - 
    alter table Task 
        add constraint FK27A9A5971F0456 
        foreign key (person) 
        references Person
14:19:29,973 DEBUG SQL:104 - 
    alter table Thing 
        add constraint FK4D094CE971F0456 
        foreign key (person) 
        references Person
14:19:29,973  INFO SchemaExport:405 - HHH000230: Schema export complete
14:19:29,973  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:19:29,974  INFO CustomRunner:139 - Test: testCollectionNoVersion
14:19:29,976 DEBUG SQL:104 - 
    insert 
    into
        Person
        (version, name) 
    values
        (?, ?)
14:19:29,977 DEBUG SQL:104 - 
    insert 
    into
        Task
        (version, person, description) 
    values
        (?, ?, ?)
14:19:29,978 DEBUG SQL:104 - 
    select
        this_.name as name0_0_,
        this_.version as version0_0_ 
    from
        Person this_
14:19:29,978 DEBUG SQL:104 - 
    select
        task_.description,
        task_.version as version1_,
        task_.person as person1_ 
    from
        Task task_ 
    where
        task_.description=?
14:19:29,979 DEBUG SQL:104 - 
    insert 
    into
        Task
        (version, person, description) 
    values
        (?, ?, ?)
14:19:29,979 DEBUG SQL:104 - 
    select
        this_.name as name0_0_,
        this_.version as version0_0_ 
    from
        Person this_
14:19:29,979 DEBUG SQL:104 - 
    select
        tasks0_.person as person0_1_,
        tasks0_.description as descript1_1_1_,
        tasks0_.description as descript1_1_0_,
        tasks0_.version as version1_0_,
        tasks0_.person as person1_0_ 
    from
        Task tasks0_ 
    where
        tasks0_.person=?
14:19:29,980 DEBUG SQL:104 - 
    delete 
    from
        Task 
    where
        description=? 
        and version=?
14:19:29,980 DEBUG SQL:104 - 
    delete 
    from
        Task 
    where
        description=? 
        and version=?
14:19:29,981 DEBUG SQL:104 - 
    select
        person_.name,
        person_.version as version0_ 
    from
        Person person_ 
    where
        person_.name=?
14:19:29,981 DEBUG SQL:104 - 
    select
        things0_.person as person0_1_,
        things0_.description as descript1_2_1_,
        things0_.description as descript1_2_0_,
        things0_.version as version2_0_,
        things0_.longDescription as longDesc3_2_0_,
        things0_.person as person2_0_ 
    from
        Thing things0_ 
    where
        things0_.person=?
14:19:29,981 DEBUG SQL:104 - 
    delete 
    from
        Person 
    where
        name=? 
        and version=?
14:19:29,991  INFO CustomRunner:139 - Test: testCollectionVersion
14:19:30,001 DEBUG SQL:104 - 
    insert 
    into
        Person
        (version, name) 
    values
        (?, ?)
14:19:30,002 DEBUG SQL:104 - 
    insert 
    into
        Thing
        (version, longDescription, person, description) 
    values
        (?, ?, ?, ?)
14:19:30,003 DEBUG SQL:104 - 
    select
        this_.name as name0_0_,
        this_.version as version0_0_ 
    from
        Person this_
14:19:30,003 DEBUG SQL:104 - 
    select
        thing_.description,
        thing_.version as version2_,
        thing_.longDescription as longDesc3_2_,
        thing_.person as person2_ 
    from
        Thing thing_ 
    where
        thing_.description=?
14:19:30,003 DEBUG SQL:104 - 
    insert 
    into
        Thing
        (version, longDescription, person, description) 
    values
        (?, ?, ?, ?)
14:19:30,004 DEBUG SQL:104 - 
    update
        Person 
    set
        version=? 
    where
        name=? 
        and version=?
14:19:30,013 DEBUG SQL:104 - 
    select
        this_.name as name0_0_,
        this_.version as version0_0_ 
    from
        Person this_
14:19:30,014 DEBUG SQL:104 - 
    select
        things0_.person as person0_1_,
        things0_.description as descript1_2_1_,
        things0_.description as descript1_2_0_,
        things0_.version as version2_0_,
        things0_.longDescription as longDesc3_2_0_,
        things0_.person as person2_0_ 
    from
        Thing things0_ 
    where
        things0_.person=?
14:19:30,015 DEBUG SQL:104 - 
    update
        Person 
    set
        version=? 
    where
        name=? 
        and version=?
14:19:30,015 DEBUG SQL:104 - 
    delete 
    from
        Thing 
    where
        description=? 
        and version=?
14:19:30,015 DEBUG SQL:104 - 
    delete 
    from
        Thing 
    where
        description=? 
        and version=?
14:19:30,016 DEBUG SQL:104 - 
    select
        person_.name,
        person_.version as version0_ 
    from
        Person person_ 
    where
        person_.name=?
14:19:30,017 DEBUG SQL:104 - 
    select
        tasks0_.person as person0_1_,
        tasks0_.description as descript1_1_1_,
        tasks0_.description as descript1_1_0_,
        tasks0_.version as version1_0_,
        tasks0_.person as person1_0_ 
    from
        Task tasks0_ 
    where
        tasks0_.person=?
14:19:30,029 DEBUG SQL:104 - 
    delete 
    from
        Person 
    where
        name=? 
        and version=?
14:19:30,030  INFO CustomRunner:139 - Test: testVersionShortCircuitFlush
14:19:30,031 DEBUG SQL:104 - 
    insert 
    into
        Person
        (version, name) 
    values
        (?, ?)
14:19:30,032 DEBUG SQL:104 - 
    insert 
    into
        Thing
        (version, longDescription, person, description) 
    values
        (?, ?, ?, ?)
14:19:30,035 DEBUG SQL:104 - 
    select
        thing0_.description as descript1_2_0_,
        thing0_.version as version2_0_,
        thing0_.longDescription as longDesc3_2_0_,
        thing0_.person as person2_0_ 
    from
        Thing thing0_ 
    where
        thing0_.description=?
14:19:30,036 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.version.Person
14:19:30,036 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          \-[RANGE] Node: 'RANGE'
             \-[DOT] Node: '.'
                +-[DOT] Node: '.'
                |  +-[DOT] Node: '.'
                |  |  +-[DOT] Node: '.'
                |  |  |  +-[IDENT] Node: 'org'
                |  |  |  \-[IDENT] Node: 'hibernate'
                |  |  \-[IDENT] Node: 'test'
                |  \-[IDENT] Node: 'version'
                \-[IDENT] Node: 'Person'

14:19:30,036 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,037 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.version.Person (<no alias>) -> person0_
14:19:30,037 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} Person person0_ ) )
14:19:30,037 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:19:30,037 DEBUG JoinProcessor:175 - Using FROM fragment [Person person0_]
14:19:30,037 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (Person)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'person0_.name as name0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Person,tableAlias=person0_,origin=null,columns={,className=org.hibernate.test.version.Person}}}
    |  \-[SQL_TOKEN] SqlFragment: 'person0_.version as version0_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[person0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'Person person0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Person,tableAlias=person0_,origin=null,columns={,className=org.hibernate.test.version.Person}}

14:19:30,037 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,037 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.version.Person
14:19:30,038 DEBUG QueryTranslatorImpl:236 - SQL: select person0_.name as name0_, person0_.version as version0_ from Person person0_
14:19:30,038 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,038 DEBUG SQL:104 - 
    select
        person0_.name as name0_,
        person0_.version as version0_ 
    from
        Person person0_
14:19:30,039 DEBUG SQL:104 - 
    select
        person0_.name as name0_,
        person0_.version as version0_ 
    from
        Person person0_
14:19:30,039 DEBUG SQL:104 - 
    select
        person0_.name as name0_,
        person0_.version as version0_ 
    from
        Person person0_
14:19:30,050 DEBUG SQL:104 - 
    update
        Thing 
    set
        version=?,
        longDescription=?,
        person=? 
    where
        description=? 
        and version=?
14:19:30,051 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete from org.hibernate.test.version.Thing
14:19:30,052 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[IDENT] Node: 'org'
             |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  \-[IDENT] Node: 'test'
             |  \-[IDENT] Node: 'version'
             \-[IDENT] Node: 'Thing'

14:19:30,052 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,052 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.version.Thing (<no alias>) -> thing0_
14:19:30,059 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (Thing)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[thing0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'Thing' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Thing,tableAlias=thing0_,origin=null,columns={,className=org.hibernate.test.version.Thing}}

14:19:30,060 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,060 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,060 DEBUG SQL:104 - 
    delete 
    from
        Thing
14:19:30,061 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete from org.hibernate.test.version.Person
14:19:30,062 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[IDENT] Node: 'org'
             |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  \-[IDENT] Node: 'test'
             |  \-[IDENT] Node: 'version'
             \-[IDENT] Node: 'Person'

14:19:30,063 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,063 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.version.Person (<no alias>) -> person0_
14:19:30,063 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (Person)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[person0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'Person' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Person,tableAlias=person0_,origin=null,columns={,className=org.hibernate.test.version.Person}}

14:19:30,063 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,063 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:19:30,063 DEBUG SQL:104 - 
    delete 
    from
        Person
14:19:30,064  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:19:30,065 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:19:30,065 DEBUG SQL:104 - 
    alter table Task 
        drop constraint FK27A9A5971F0456
14:19:30,084 DEBUG SQL:104 - 
    alter table Thing 
        drop constraint FK4D094CE971F0456
14:19:30,085 DEBUG SQL:104 - 
    drop table Person if exists
14:19:30,085 DEBUG SQL:104 - 
    drop table Task if exists
14:19:30,085 DEBUG SQL:104 - 
    drop table Thing if exists
14:19:30,086  INFO SchemaExport:405 - HHH000230: Schema export complete
14:19:30,086  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
