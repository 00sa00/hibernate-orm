<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.jpa.fetch.FetchingTest" tests="2" time="0.175" timestamp="2013-02-28T20:14:50">
  <properties />
  <testcase classname="org.hibernate.test.jpa.fetch.FetchingTest" name="testHibernateFetchingLazy" time="0.085" />
  <testcase classname="org.hibernate.test.jpa.fetch.FetchingTest" name="testLazy" time="0.034" />
  <system-out><![CDATA[14:14:50,999  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.jpa.fetch.FetchingTest
14:14:51,001  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/jpa/fetch/Person.hbm.xml
14:14:51,010  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:14:51,010  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:14:51,010  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:14:51,011  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:14:51,011  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:14:51,012  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:14:51,012  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:14:51,013  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:14:51,013  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:14:51,024  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:51,025 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:51,025 DEBUG SQL:104 - 
    alter table STAY 
        drop constraint FK26FE59B1DD6596
14:14:51,025 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table STAY drop constraint FK26FE59B1DD6596
14:14:51,025 ERROR SchemaExport:426 - Table "STAY" not found; SQL statement:

    alter table STAY 
        drop constraint FK26FE59B1DD6596 [42102-145]
14:14:51,025 DEBUG SQL:104 - 
    alter table STAY 
        drop constraint FK26FE59C74DA37E
14:14:51,025 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table STAY drop constraint FK26FE59C74DA37E
14:14:51,026 ERROR SchemaExport:426 - Table "STAY" not found; SQL statement:

    alter table STAY 
        drop constraint FK26FE59C74DA37E [42102-145]
14:14:51,026 DEBUG SQL:104 - 
    alter table STAY 
        drop constraint FK26FE595FB90DF5
14:14:51,026 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table STAY drop constraint FK26FE595FB90DF5
14:14:51,026 ERROR SchemaExport:426 - Table "STAY" not found; SQL statement:

    alter table STAY 
        drop constraint FK26FE595FB90DF5 [42102-145]
14:14:51,026 DEBUG SQL:104 - 
    drop table PERSON if exists
14:14:51,026 DEBUG SQL:104 - 
    drop table STAY if exists
14:14:51,026 DEBUG SQL:104 - 
    create table PERSON (
        ID bigint not null,
        firstName varchar(255),
        lastName varchar(255),
        companyName varchar(255),
        primary key (ID)
    )
14:14:51,027 DEBUG SQL:104 - 
    create table STAY (
        ID bigint not null,
        startDate timestamp,
        endDate timestamp,
        vessel varchar(255),
        authoriser varchar(255),
        comments varchar(255),
        PERS_ID bigint,
        OLD_PERS_ID bigint,
        VERY_OLD_PERS_ID bigint,
        primary key (ID)
    )
14:14:51,027 DEBUG SQL:104 - 
    alter table STAY 
        add constraint FK26FE59B1DD6596 
        foreign key (PERS_ID) 
        references PERSON
14:14:51,028 DEBUG SQL:104 - 
    alter table STAY 
        add constraint FK26FE59C74DA37E 
        foreign key (OLD_PERS_ID) 
        references PERSON
14:14:51,029 DEBUG SQL:104 - 
    alter table STAY 
        add constraint FK26FE595FB90DF5 
        foreign key (VERY_OLD_PERS_ID) 
        references PERSON
14:14:51,030  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:51,030  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:14:51,030  INFO CustomRunner:139 - Test: testHibernateFetchingLazy
14:14:51,031 DEBUG SQL:104 - 
    select
        max(ID) 
    from
        PERSON
14:14:51,032 DEBUG SQL:104 - 
    select
        max(ID) 
    from
        STAY
14:14:51,034 DEBUG SQL:104 - 
    insert 
    into
        PERSON
        (firstName, lastName, companyName, ID) 
    values
        (?, ?, ?, ?)
14:14:51,036 DEBUG SQL:104 - 
    insert 
    into
        STAY
        (startDate, endDate, vessel, authoriser, comments, PERS_ID, OLD_PERS_ID, VERY_OLD_PERS_ID, ID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
14:14:51,036 DEBUG SQL:104 - 
    insert 
    into
        STAY
        (startDate, endDate, vessel, authoriser, comments, PERS_ID, OLD_PERS_ID, VERY_OLD_PERS_ID, ID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
14:14:51,037 DEBUG SQL:104 - 
    insert 
    into
        STAY
        (startDate, endDate, vessel, authoriser, comments, PERS_ID, OLD_PERS_ID, VERY_OLD_PERS_ID, ID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
14:14:51,037 DEBUG QueryTranslatorImpl:265 - parse() - HQL: select p from org.hibernate.test.jpa.fetch.Person p where p.firstName = :name
14:14:51,037 DEBUG ErrorCounter:63 - Keyword  'fetch' is being interpreted as an identifier due to: expecting IDENT, found 'fetch'
14:14:51,038 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  +-[FROM] Node: 'from'
    |  |  \-[RANGE] Node: 'RANGE'
    |  |     +-[DOT] Node: '.'
    |  |     |  +-[DOT] Node: '.'
    |  |     |  |  +-[DOT] Node: '.'
    |  |     |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  +-[DOT] Node: '.'
    |  |     |  |  |  |  |  +-[IDENT] Node: 'org'
    |  |     |  |  |  |  |  \-[IDENT] Node: 'hibernate'
    |  |     |  |  |  |  \-[IDENT] Node: 'test'
    |  |     |  |  |  \-[IDENT] Node: 'jpa'
    |  |     |  |  \-[WEIRD_IDENT] Node: 'fetch'
    |  |     |  \-[IDENT] Node: 'Person'
    |  |     \-[ALIAS] Node: 'p'
    |  \-[SELECT] Node: 'select'
    |     \-[IDENT] Node: 'p'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[DOT] Node: '.'
          |  +-[IDENT] Node: 'p'
          |  \-[IDENT] Node: 'firstName'
          \-[COLON] Node: ':'
             \-[IDENT] Node: 'name'

14:14:51,047 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:51,047 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.jpa.fetch.Person (p) -> person0_
14:14:51,047 DEBUG FromReferenceNode:74 - Resolved : p -> person0_.ID
14:14:51,048 DEBUG FromReferenceNode:74 - Resolved : p -> person0_.ID
14:14:51,048 DEBUG DotNode:599 - getDataType() : firstName -> org.hibernate.type.StringType@2dc8de40
14:14:51,048 DEBUG FromReferenceNode:74 - Resolved : p.firstName -> person0_.firstName
14:14:51,048 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( {select clause} person0_.ID ) ( FromClause{level=1} PERSON person0_ ) ( where ( = ( person0_.firstName person0_.ID firstName ) ? ) ) )
14:14:51,048 DEBUG JoinProcessor:175 - Using FROM fragment [PERSON person0_]
14:14:51,048 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (PERSON)
    +-[SELECT_CLAUSE] SelectClause: '{select clause}'
    |  +-[ALIAS_REF] IdentNode: 'person0_.ID as ID0_' {alias=p, className=org.hibernate.test.jpa.fetch.Person, tableAlias=person0_}
    |  \-[SQL_TOKEN] SqlFragment: 'person0_.firstName as firstName0_, person0_.lastName as lastName0_, person0_.companyName as companyN4_0_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[p], fromElementByTableAlias=[person0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'PERSON person0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=p,role=null,tableName=PERSON,tableAlias=person0_,origin=null,columns={,className=org.hibernate.test.jpa.fetch.Person}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[DOT] DotNode: 'person0_.firstName' {propertyName=firstName,dereferenceType=ALL,propertyPath=firstName,path=p.firstName,tableAlias=person0_,className=org.hibernate.test.jpa.fetch.Person,classAlias=p}
          |  +-[ALIAS_REF] IdentNode: 'person0_.ID' {alias=p, className=org.hibernate.test.jpa.fetch.Person, tableAlias=person0_}
          |  \-[IDENT] IdentNode: 'firstName' {originalText=firstName}
          \-[NAMED_PARAM] ParameterNode: '?' {name=name, expectedType=org.hibernate.type.StringType@2dc8de40}

14:14:51,049 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:51,049 DEBUG QueryTranslatorImpl:235 - HQL: select p from org.hibernate.test.jpa.fetch.Person p where p.firstName = :name
14:14:51,049 DEBUG QueryTranslatorImpl:236 - SQL: select person0_.ID as ID0_, person0_.firstName as firstName0_, person0_.lastName as lastName0_, person0_.companyName as companyN4_0_ from PERSON person0_ where person0_.firstName=?
14:14:51,049 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:51,049 DEBUG SQL:104 - 
    select
        person0_.ID as ID0_,
        person0_.firstName as firstName0_,
        person0_.lastName as lastName0_,
        person0_.companyName as companyN4_0_ 
    from
        PERSON person0_ 
    where
        person0_.firstName=?
14:14:51,059 DEBUG SQL:104 - 
    select
        count(ID) 
    from
        STAY 
    where
        OLD_PERS_ID =?
14:14:51,060 DEBUG SQL:104 - 
    select
        stay0_.ID as ID1_1_,
        stay0_.startDate as startDate1_1_,
        stay0_.endDate as endDate1_1_,
        stay0_.vessel as vessel1_1_,
        stay0_.authoriser as authoriser1_1_,
        stay0_.comments as comments1_1_,
        stay0_.PERS_ID as PERS7_1_1_,
        stay0_.OLD_PERS_ID as OLD8_1_1_,
        stay0_.VERY_OLD_PERS_ID as VERY9_1_1_,
        person1_.ID as ID0_0_,
        person1_.firstName as firstName0_0_,
        person1_.lastName as lastName0_0_,
        person1_.companyName as companyN4_0_0_ 
    from
        STAY stay0_ 
    left outer join
        PERSON person1_ 
            on stay0_.VERY_OLD_PERS_ID=person1_.ID 
    where
        stay0_.ID=?
14:14:51,070 DEBUG SQL:104 - 
    select
        stay0_.ID as ID1_1_,
        stay0_.startDate as startDate1_1_,
        stay0_.endDate as endDate1_1_,
        stay0_.vessel as vessel1_1_,
        stay0_.authoriser as authoriser1_1_,
        stay0_.comments as comments1_1_,
        stay0_.PERS_ID as PERS7_1_1_,
        stay0_.OLD_PERS_ID as OLD8_1_1_,
        stay0_.VERY_OLD_PERS_ID as VERY9_1_1_,
        person1_.ID as ID0_0_,
        person1_.firstName as firstName0_0_,
        person1_.lastName as lastName0_0_,
        person1_.companyName as companyN4_0_0_ 
    from
        STAY stay0_ 
    left outer join
        PERSON person1_ 
            on stay0_.VERY_OLD_PERS_ID=person1_.ID 
    where
        stay0_.ID=?
14:14:51,072 DEBUG SQL:104 - 
    select
        stays0_.PERS_ID as PERS7_0_2_,
        stays0_.ID as ID1_2_,
        stays0_.ID as ID1_1_,
        stays0_.startDate as startDate1_1_,
        stays0_.endDate as endDate1_1_,
        stays0_.vessel as vessel1_1_,
        stays0_.authoriser as authoriser1_1_,
        stays0_.comments as comments1_1_,
        stays0_.PERS_ID as PERS7_1_1_,
        stays0_.OLD_PERS_ID as OLD8_1_1_,
        stays0_.VERY_OLD_PERS_ID as VERY9_1_1_,
        person1_.ID as ID0_0_,
        person1_.firstName as firstName0_0_,
        person1_.lastName as lastName0_0_,
        person1_.companyName as companyN4_0_0_ 
    from
        STAY stays0_ 
    left outer join
        PERSON person1_ 
            on stays0_.VERY_OLD_PERS_ID=person1_.ID 
    where
        stays0_.PERS_ID=?
14:14:51,091 DEBUG SQL:104 - 
    select
        oldstays0_.OLD_PERS_ID as OLD8_0_2_,
        oldstays0_.ID as ID1_2_,
        oldstays0_.ID as ID1_1_,
        oldstays0_.startDate as startDate1_1_,
        oldstays0_.endDate as endDate1_1_,
        oldstays0_.vessel as vessel1_1_,
        oldstays0_.authoriser as authoriser1_1_,
        oldstays0_.comments as comments1_1_,
        oldstays0_.PERS_ID as PERS7_1_1_,
        oldstays0_.OLD_PERS_ID as OLD8_1_1_,
        oldstays0_.VERY_OLD_PERS_ID as VERY9_1_1_,
        person1_.ID as ID0_0_,
        person1_.firstName as firstName0_0_,
        person1_.lastName as lastName0_0_,
        person1_.companyName as companyN4_0_0_ 
    from
        STAY oldstays0_ 
    left outer join
        PERSON person1_ 
            on oldstays0_.VERY_OLD_PERS_ID=person1_.ID 
    where
        oldstays0_.OLD_PERS_ID=?
14:14:51,092 DEBUG SQL:104 - 
    select
        veryoldsta0_.VERY_OLD_PERS_ID as VERY9_0_1_,
        veryoldsta0_.ID as ID1_1_,
        veryoldsta0_.ID as ID1_0_,
        veryoldsta0_.startDate as startDate1_0_,
        veryoldsta0_.endDate as endDate1_0_,
        veryoldsta0_.vessel as vessel1_0_,
        veryoldsta0_.authoriser as authoriser1_0_,
        veryoldsta0_.comments as comments1_0_,
        veryoldsta0_.PERS_ID as PERS7_1_0_,
        veryoldsta0_.OLD_PERS_ID as OLD8_1_0_,
        veryoldsta0_.VERY_OLD_PERS_ID as VERY9_1_0_ 
    from
        STAY veryoldsta0_ 
    where
        veryoldsta0_.VERY_OLD_PERS_ID=?
14:14:51,102 DEBUG SQL:104 - 
    delete 
    from
        STAY 
    where
        ID=?
14:14:51,103 DEBUG SQL:104 - 
    delete 
    from
        STAY 
    where
        ID=?
14:14:51,103 DEBUG SQL:104 - 
    delete 
    from
        STAY 
    where
        ID=?
14:14:51,115 DEBUG SQL:104 - 
    delete 
    from
        PERSON 
    where
        ID=?
14:14:51,116  INFO CustomRunner:139 - Test: testLazy
14:14:51,119 DEBUG SQL:104 - 
    insert 
    into
        PERSON
        (firstName, lastName, companyName, ID) 
    values
        (?, ?, ?, ?)
14:14:51,119 DEBUG SQL:104 - 
    insert 
    into
        STAY
        (startDate, endDate, vessel, authoriser, comments, PERS_ID, OLD_PERS_ID, VERY_OLD_PERS_ID, ID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
14:14:51,119 DEBUG SQL:104 - 
    select
        person0_.ID as ID0_,
        person0_.firstName as firstName0_,
        person0_.lastName as lastName0_,
        person0_.companyName as companyN4_0_ 
    from
        PERSON person0_ 
    where
        person0_.firstName=?
14:14:51,128 DEBUG SQL:104 - 
    select
        stays0_.PERS_ID as PERS7_0_2_,
        stays0_.ID as ID1_2_,
        stays0_.ID as ID1_1_,
        stays0_.startDate as startDate1_1_,
        stays0_.endDate as endDate1_1_,
        stays0_.vessel as vessel1_1_,
        stays0_.authoriser as authoriser1_1_,
        stays0_.comments as comments1_1_,
        stays0_.PERS_ID as PERS7_1_1_,
        stays0_.OLD_PERS_ID as OLD8_1_1_,
        stays0_.VERY_OLD_PERS_ID as VERY9_1_1_,
        person1_.ID as ID0_0_,
        person1_.firstName as firstName0_0_,
        person1_.lastName as lastName0_0_,
        person1_.companyName as companyN4_0_0_ 
    from
        STAY stays0_ 
    left outer join
        PERSON person1_ 
            on stays0_.VERY_OLD_PERS_ID=person1_.ID 
    where
        stays0_.PERS_ID=?
14:14:51,129 DEBUG SQL:104 - 
    select
        oldstays0_.OLD_PERS_ID as OLD8_0_2_,
        oldstays0_.ID as ID1_2_,
        oldstays0_.ID as ID1_1_,
        oldstays0_.startDate as startDate1_1_,
        oldstays0_.endDate as endDate1_1_,
        oldstays0_.vessel as vessel1_1_,
        oldstays0_.authoriser as authoriser1_1_,
        oldstays0_.comments as comments1_1_,
        oldstays0_.PERS_ID as PERS7_1_1_,
        oldstays0_.OLD_PERS_ID as OLD8_1_1_,
        oldstays0_.VERY_OLD_PERS_ID as VERY9_1_1_,
        person1_.ID as ID0_0_,
        person1_.firstName as firstName0_0_,
        person1_.lastName as lastName0_0_,
        person1_.companyName as companyN4_0_0_ 
    from
        STAY oldstays0_ 
    left outer join
        PERSON person1_ 
            on oldstays0_.VERY_OLD_PERS_ID=person1_.ID 
    where
        oldstays0_.OLD_PERS_ID=?
14:14:51,139 DEBUG SQL:104 - 
    select
        veryoldsta0_.VERY_OLD_PERS_ID as VERY9_0_1_,
        veryoldsta0_.ID as ID1_1_,
        veryoldsta0_.ID as ID1_0_,
        veryoldsta0_.startDate as startDate1_0_,
        veryoldsta0_.endDate as endDate1_0_,
        veryoldsta0_.vessel as vessel1_0_,
        veryoldsta0_.authoriser as authoriser1_0_,
        veryoldsta0_.comments as comments1_0_,
        veryoldsta0_.PERS_ID as PERS7_1_0_,
        veryoldsta0_.OLD_PERS_ID as OLD8_1_0_,
        veryoldsta0_.VERY_OLD_PERS_ID as VERY9_1_0_ 
    from
        STAY veryoldsta0_ 
    where
        veryoldsta0_.VERY_OLD_PERS_ID=?
14:14:51,149 DEBUG SQL:104 - 
    delete 
    from
        STAY 
    where
        ID=?
14:14:51,150 DEBUG SQL:104 - 
    delete 
    from
        PERSON 
    where
        ID=?
14:14:51,151  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:51,151 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:51,151 DEBUG SQL:104 - 
    alter table STAY 
        drop constraint FK26FE59B1DD6596
14:14:51,152 DEBUG SQL:104 - 
    alter table STAY 
        drop constraint FK26FE59C74DA37E
14:14:51,152 DEBUG SQL:104 - 
    alter table STAY 
        drop constraint FK26FE595FB90DF5
14:14:51,170 DEBUG SQL:104 - 
    drop table PERSON if exists
14:14:51,171 DEBUG SQL:104 - 
    drop table STAY if exists
14:14:51,171  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:51,171  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
