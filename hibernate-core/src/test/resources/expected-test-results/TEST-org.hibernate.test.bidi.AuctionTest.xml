<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.bidi.AuctionTest" tests="1" time="0.279" timestamp="2013-02-28T20:11:38">
  <properties />
  <testcase classname="org.hibernate.test.bidi.AuctionTest" name="testLazy" time="0.209" />
  <system-out><![CDATA[14:11:38,992  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.bidi.AuctionTest
14:11:38,996  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/bidi/Auction.hbm.xml
14:11:39,019  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:11:39,020  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:11:39,020  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:11:39,020  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:11:39,020  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:11:39,022  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:11:39,023  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:11:39,024  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:11:39,024  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:11:39,024  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:11:39,048  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:11:39,049 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:11:39,049 DEBUG SQL:104 - 
    alter table TBid 
        drop constraint FK2734098AB4B515
14:11:39,050 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table TBid drop constraint FK2734098AB4B515
14:11:39,050 ERROR SchemaExport:426 - Table "TBID" not found; SQL statement:

    alter table TBid 
        drop constraint FK2734098AB4B515 [42102-145]
14:11:39,050 DEBUG SQL:104 - 
    drop table TAuction if exists
14:11:39,050 DEBUG SQL:104 - 
    drop table TBid if exists
14:11:39,051 DEBUG SQL:104 - 
    create table TAuction (
        id bigint generated by default as identity,
        description varchar(255),
        endDatetime timestamp,
        primary key (id)
    )
14:11:39,051 DEBUG SQL:104 - 
    create table TBid (
        id bigint generated by default as identity,
        amount decimal(31,19),
        createdDatetime timestamp,
        auctionId bigint,
        success boolean,
        primary key (id)
    )
14:11:39,052 DEBUG SQL:104 - 
    alter table TBid 
        add constraint FK2734098AB4B515 
        foreign key (auctionId) 
        references TAuction
14:11:39,052  INFO SchemaExport:405 - HHH000230: Schema export complete
14:11:39,053  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:11:39,053  INFO CustomRunner:139 - Test: testLazy
14:11:39,056 DEBUG SQL:104 - 
    insert 
    into
        TAuction
        (id, description, endDatetime) 
    values
        (null, ?, ?)
14:11:39,075 DEBUG SQL:104 - 
    insert 
    into
        TBid
        (id, amount, createdDatetime, auctionId, success) 
    values
        (null, ?, ?, ?, ?)
14:11:39,077 DEBUG SQL:104 - 
    select
        auction0_.id as id0_1_,
        auction0_.description as descript2_0_1_,
        auction0_.endDatetime as endDatet3_0_1_,
        auction0_.id as formula37_1_,
        1 as formula38_1_,
        bid1_.id as id1_0_,
        bid1_.amount as amount1_0_,
        bid1_.createdDatetime as createdD3_1_0_,
        bid1_.auctionId as auctionId1_0_,
        bid1_.success as success1_0_ 
    from
        TAuction auction0_ 
    left outer join
        TBid bid1_ 
            on auction0_.id=bid1_.auctionId 
            and 1=bid1_.success 
    where
        auction0_.id=?
14:11:39,094 DEBUG SQL:104 - 
    select
        bids0_.auctionId as auctionId0_1_,
        bids0_.id as id1_1_,
        bids0_.id as id1_0_,
        bids0_.amount as amount1_0_,
        bids0_.createdDatetime as createdD3_1_0_,
        bids0_.auctionId as auctionId1_0_,
        bids0_.success as success1_0_ 
    from
        TBid bids0_ 
    where
        bids0_.auctionId=?
14:11:39,097 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.bids
14:11:39,099 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          +-[RANGE] Node: 'RANGE'
          |  +-[DOT] Node: '.'
          |  |  +-[DOT] Node: '.'
          |  |  |  +-[DOT] Node: '.'
          |  |  |  |  +-[DOT] Node: '.'
          |  |  |  |  |  +-[IDENT] Node: 'org'
          |  |  |  |  |  \-[IDENT] Node: 'hibernate'
          |  |  |  |  \-[IDENT] Node: 'test'
          |  |  |  \-[IDENT] Node: 'bidi'
          |  |  \-[IDENT] Node: 'Auction'
          |  \-[ALIAS] Node: 'a'
          \-[JOIN] Node: 'join'
             +-[LEFT] Node: 'left'
             +-[FETCH] Node: 'fetch'
             \-[DOT] Node: '.'
                +-[IDENT] Node: 'a'
                \-[IDENT] Node: 'bids'

14:11:39,099 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,100 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Auction (a) -> auction0_
14:11:39,100 DEBUG FromReferenceNode:74 - Resolved : a -> auction0_.id
14:11:39,100 DEBUG DotNode:599 - getDataType() : bids -> org.hibernate.type.BagType(org.hibernate.test.bidi.Auction.bids)
14:11:39,101 DEBUG FromElementFactory:376 - createEntityAssociation() : One to many - path = a.bids role = org.hibernate.test.bidi.Auction.bids associatedEntityName = org.hibernate.test.bidi.Bid
14:11:39,101 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Bid (<no alias>) -> bids1_
14:11:39,101 DEBUG FromClause:282 - addJoinByPathMap() : a.bids -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid,tableAlias=bids1_,origin=TAuction auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}
14:11:39,101 DEBUG DotNode:308 - dereferenceCollection() : Created new FROM element for a.bids : TBid bids1_
14:11:39,101 DEBUG FromReferenceNode:74 - Resolved : a.bids -> .
14:11:39,101 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'TBid bids1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.bidi.Auction.bids,tableName=TBid,tableAlias=bids1_,origin=TAuction auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}

14:11:39,102 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} ( TAuction auction0_ TBid bids1_ ) ) )
14:11:39,102 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:11:39,102 DEBUG JoinProcessor:175 - Using FROM fragment [TAuction auction0_]
14:11:39,102 DEBUG JoinProcessor:175 - Using FROM fragment [left outer join TBid bids1_ on auction0_.id=bids1_.auctionId]
14:11:39,103 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (TBid,TAuction)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'auction0_.id as id0_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'bids1_.id as id1_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.bidi.Auction.bids,tableName=TBid,tableAlias=bids1_,origin=TAuction auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}}
    |  +-[SQL_TOKEN] SqlFragment: 'auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.id as formula37_0_, 1 as formula38_0_'
    |  +-[SQL_TOKEN] SqlFragment: 'bids1_.amount as amount1_1_, bids1_.createdDatetime as createdD3_1_1_, bids1_.auctionId as auctionId1_1_, bids1_.success as success1_1_'
    |  \-[SQL_TOKEN] SqlFragment: 'bids1_.auctionId as auctionId0_0__, bids1_.id as id1_0__'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=2, fromElementByClassAlias=[a], fromElementByTableAlias=[bids1_, auction0_], fromElementsByPath=[a.bids], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'TAuction auction0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}
          \-[JOIN_FRAGMENT] FromElement: 'left outer join TBid bids1_ on auction0_.id=bids1_.auctionId' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.bidi.Auction.bids,tableName=TBid,tableAlias=bids1_,origin=TAuction auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}

14:11:39,103 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,103 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.bids
14:11:39,103 DEBUG QueryTranslatorImpl:236 - SQL: select auction0_.id as id0_0_, bids1_.id as id1_1_, auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.id as formula37_0_, 1 as formula38_0_, bids1_.amount as amount1_1_, bids1_.createdDatetime as createdD3_1_1_, bids1_.auctionId as auctionId1_1_, bids1_.success as success1_1_, bids1_.auctionId as auctionId0_0__, bids1_.id as id1_0__ from TAuction auction0_ left outer join TBid bids1_ on auction0_.id=bids1_.auctionId
14:11:39,103 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,104 DEBUG SQL:104 - 
    select
        auction0_.id as id0_0_,
        bids1_.id as id1_1_,
        auction0_.description as descript2_0_0_,
        auction0_.endDatetime as endDatet3_0_0_,
        auction0_.id as formula37_0_,
        1 as formula38_0_,
        bids1_.amount as amount1_1_,
        bids1_.createdDatetime as createdD3_1_1_,
        bids1_.auctionId as auctionId1_1_,
        bids1_.success as success1_1_,
        bids1_.auctionId as auctionId0_0__,
        bids1_.id as id1_0__ 
    from
        TAuction auction0_ 
    left outer join
        TBid bids1_ 
            on auction0_.id=bids1_.auctionId
14:11:39,122 DEBUG SQL:104 - 
    select
        bid0_.id as id1_0_,
        bid0_.amount as amount1_0_,
        bid0_.createdDatetime as createdD3_1_0_,
        bid0_.auctionId as auctionId1_0_,
        bid0_.success as success1_0_ 
    from
        TBid bid0_ 
    where
        bid0_.auctionId=? 
        and bid0_.success=?
14:11:39,125 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.successfulBid
14:11:39,128 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          +-[RANGE] Node: 'RANGE'
          |  +-[DOT] Node: '.'
          |  |  +-[DOT] Node: '.'
          |  |  |  +-[DOT] Node: '.'
          |  |  |  |  +-[DOT] Node: '.'
          |  |  |  |  |  +-[IDENT] Node: 'org'
          |  |  |  |  |  \-[IDENT] Node: 'hibernate'
          |  |  |  |  \-[IDENT] Node: 'test'
          |  |  |  \-[IDENT] Node: 'bidi'
          |  |  \-[IDENT] Node: 'Auction'
          |  \-[ALIAS] Node: 'a'
          \-[JOIN] Node: 'join'
             +-[LEFT] Node: 'left'
             +-[FETCH] Node: 'fetch'
             \-[DOT] Node: '.'
                +-[IDENT] Node: 'a'
                \-[IDENT] Node: 'successfulBid'

14:11:39,159 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,161 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Auction (a) -> auction0_
14:11:39,161 DEBUG FromReferenceNode:74 - Resolved : a -> auction0_.id
14:11:39,161 DEBUG DotNode:599 - getDataType() : successfulBid -> org.hibernate.type.SpecialOneToOneType(org.hibernate.test.bidi.Bid)
14:11:39,161 DEBUG DotNode:389 - dereferenceEntityJoin() : generating join for successfulBid in org.hibernate.test.bidi.Auction (<no alias>) parent = [ {null} ]
14:11:39,161 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Bid (<no alias>) -> bid1_
14:11:39,161 DEBUG FromClause:282 - addJoinByPathMap() : a.successfulBid -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid,tableAlias=bid1_,origin=TAuction auction0_,columns={auction0_.id 1 ,className=org.hibernate.test.bidi.Bid}}
14:11:39,162 DEBUG FromReferenceNode:74 - Resolved : a.successfulBid -> auction0_.id, 1
14:11:39,162 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'TBid bid1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid,tableAlias=bid1_,origin=TAuction auction0_,columns={auction0_.id 1 ,className=org.hibernate.test.bidi.Bid}}

14:11:39,162 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} ( TAuction auction0_ TBid bid1_ ) ) )
14:11:39,162 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:11:39,162 DEBUG JoinProcessor:175 - Using FROM fragment [TAuction auction0_]
14:11:39,163 DEBUG JoinProcessor:175 - Using FROM fragment [left outer join TBid bid1_ on auction0_.id=bid1_.auctionId and 1=bid1_.success]
14:11:39,163 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (TBid,TAuction)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'auction0_.id as id0_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'bid1_.id as id1_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid,tableAlias=bid1_,origin=TAuction auction0_,columns={auction0_.id 1 ,className=org.hibernate.test.bidi.Bid}}}
    |  +-[SQL_TOKEN] SqlFragment: 'auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.id as formula37_0_, 1 as formula38_0_'
    |  \-[SQL_TOKEN] SqlFragment: 'bid1_.amount as amount1_1_, bid1_.createdDatetime as createdD3_1_1_, bid1_.auctionId as auctionId1_1_, bid1_.success as success1_1_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=2, fromElementByClassAlias=[a], fromElementByTableAlias=[bid1_, auction0_], fromElementsByPath=[a.successfulBid], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'TAuction auction0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}
          \-[JOIN_FRAGMENT] FromElement: 'left outer join TBid bid1_ on auction0_.id=bid1_.auctionId and 1=bid1_.success' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid,tableAlias=bid1_,origin=TAuction auction0_,columns={auction0_.id 1 ,className=org.hibernate.test.bidi.Bid}}

14:11:39,186 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,187 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.successfulBid
14:11:39,187 DEBUG QueryTranslatorImpl:236 - SQL: select auction0_.id as id0_0_, bid1_.id as id1_1_, auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.id as formula37_0_, 1 as formula38_0_, bid1_.amount as amount1_1_, bid1_.createdDatetime as createdD3_1_1_, bid1_.auctionId as auctionId1_1_, bid1_.success as success1_1_ from TAuction auction0_ left outer join TBid bid1_ on auction0_.id=bid1_.auctionId and 1=bid1_.success
14:11:39,187 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,188 DEBUG SQL:104 - 
    select
        auction0_.id as id0_0_,
        bid1_.id as id1_1_,
        auction0_.description as descript2_0_0_,
        auction0_.endDatetime as endDatet3_0_0_,
        auction0_.id as formula37_0_,
        1 as formula38_0_,
        bid1_.amount as amount1_1_,
        bid1_.createdDatetime as createdD3_1_1_,
        bid1_.auctionId as auctionId1_1_,
        bid1_.success as success1_1_ 
    from
        TAuction auction0_ 
    left outer join
        TBid bid1_ 
            on auction0_.id=bid1_.auctionId 
            and 1=bid1_.success
14:11:39,189 DEBUG SQL:104 - 
    select
        bids0_.auctionId as auctionId0_1_,
        bids0_.id as id1_1_,
        bids0_.id as id1_0_,
        bids0_.amount as amount1_0_,
        bids0_.createdDatetime as createdD3_1_0_,
        bids0_.auctionId as auctionId1_0_,
        bids0_.success as success1_0_ 
    from
        TBid bids0_ 
    where
        bids0_.auctionId=?
14:11:39,207 DEBUG SQL:104 - 
    select
        bid0_.id as id1_0_,
        bid0_.amount as amount1_0_,
        bid0_.createdDatetime as createdD3_1_0_,
        bid0_.auctionId as auctionId1_0_,
        bid0_.success as success1_0_ 
    from
        TBid bid0_ 
    where
        bid0_.id=?
14:11:39,208 DEBUG SQL:104 - 
    select
        auction0_.id as id0_1_,
        auction0_.description as descript2_0_1_,
        auction0_.endDatetime as endDatet3_0_1_,
        auction0_.id as formula37_1_,
        1 as formula38_1_,
        bid1_.id as id1_0_,
        bid1_.amount as amount1_0_,
        bid1_.createdDatetime as createdD3_1_0_,
        bid1_.auctionId as auctionId1_0_,
        bid1_.success as success1_0_ 
    from
        TAuction auction0_ 
    left outer join
        TBid bid1_ 
            on auction0_.id=bid1_.auctionId 
            and 1=bid1_.success 
    where
        auction0_.id=?
14:11:39,208 DEBUG SQL:104 - 
    select
        bid0_.id as id1_0_,
        bid0_.amount as amount1_0_,
        bid0_.createdDatetime as createdD3_1_0_,
        bid0_.auctionId as auctionId1_0_,
        bid0_.success as success1_0_ 
    from
        TBid bid0_ 
    where
        bid0_.auctionId=? 
        and bid0_.success=?
14:11:39,209 DEBUG SQL:104 - 
    select
        bids0_.auctionId as auctionId0_1_,
        bids0_.id as id1_1_,
        bids0_.id as id1_0_,
        bids0_.amount as amount1_0_,
        bids0_.createdDatetime as createdD3_1_0_,
        bids0_.auctionId as auctionId1_0_,
        bids0_.success as success1_0_ 
    from
        TBid bids0_ 
    where
        bids0_.auctionId=?
14:11:39,264  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:11:39,265 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:11:39,265 DEBUG SQL:104 - 
    alter table TBid 
        drop constraint FK2734098AB4B515
14:11:39,265 DEBUG SQL:104 - 
    drop table TAuction if exists
14:11:39,266 DEBUG SQL:104 - 
    drop table TBid if exists
14:11:39,266  INFO SchemaExport:405 - HHH000230: Schema export complete
14:11:39,266  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
