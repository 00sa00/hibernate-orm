<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" tests="6" time="0.18" timestamp="2013-02-28T20:12:33">
  <properties />
  <testcase classname="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" name="testIdentityColumnGeneratedIds" time="0.002" />
  <testcase classname="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" name="testPersistOutsideTransaction" time="0.026" />
  <testcase classname="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" name="testPersistOutsideTransactionCascadedFromManyToOne" time="0.027" />
  <testcase classname="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" name="testPersistOutsideTransactionCascadedToInverseCollection" time="0.015" />
  <testcase classname="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" name="testPersistOutsideTransactionCascadedToManyToOne" time="0.002" />
  <testcase classname="org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest" name="testPersistOutsideTransactionCascadedToNonInverseCollection" time="0.01" />
  <system-out><![CDATA[14:12:33,366  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.generatedkeys.identity.IdentityGeneratedKeysTest
14:12:33,368  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/generatedkeys/identity/MyEntity.hbm.xml
14:12:33,376  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:12:33,376  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:12:33,376  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:12:33,376  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:12:33,388  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:12:33,389  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:12:33,390  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:12:33,390  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:12:33,391  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:12:33,391  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:12:33,401  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:33,402 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:33,402 DEBUG SQL:104 - 
    alter table my_child 
        drop constraint FKE37274C934E3E7E0
14:12:33,403 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table my_child drop constraint FKE37274C934E3E7E0
14:12:33,403 ERROR SchemaExport:426 - Table "MY_CHILD" not found; SQL statement:

    alter table my_child 
        drop constraint FKE37274C934E3E7E0 [42102-145]
14:12:33,403 DEBUG SQL:104 - 
    alter table my_child 
        drop constraint FKE37274C919B5F9EE
14:12:33,403 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table my_child drop constraint FKE37274C919B5F9EE
14:12:33,403 ERROR SchemaExport:426 - Table "MY_CHILD" not found; SQL statement:

    alter table my_child 
        drop constraint FKE37274C919B5F9EE [42102-145]
14:12:33,403 DEBUG SQL:104 - 
    alter table my_entity 
        drop constraint FK8E9F59D6E06852E9
14:12:33,403 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table my_entity drop constraint FK8E9F59D6E06852E9
14:12:33,403 ERROR SchemaExport:426 - Table "MY_ENTITY" not found; SQL statement:

    alter table my_entity 
        drop constraint FK8E9F59D6E06852E9 [42102-145]
14:12:33,404 DEBUG SQL:104 - 
    alter table my_sibling 
        drop constraint FK205E6F2F15D01C1
14:12:33,404 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table my_sibling drop constraint FK205E6F2F15D01C1
14:12:33,404 ERROR SchemaExport:426 - Table "MY_SIBLING" not found; SQL statement:

    alter table my_sibling 
        drop constraint FK205E6F2F15D01C1 [42102-145]
14:12:33,404 DEBUG SQL:104 - 
    drop table my_child if exists
14:12:33,404 DEBUG SQL:104 - 
    drop table my_entity if exists
14:12:33,404 DEBUG SQL:104 - 
    drop table my_sibling if exists
14:12:33,404 DEBUG SQL:104 - 
    create table my_child (
        id bigint not null,
        name varchar(255),
        inv_parent_id bigint,
        non_inv_parent_id bigint,
        primary key (id)
    )
14:12:33,405 DEBUG SQL:104 - 
    create table my_entity (
        id bigint generated by default as identity,
        name varchar(255),
        sibling bigint,
        primary key (id)
    )
14:12:33,420 DEBUG SQL:104 - 
    create table my_sibling (
        id bigint not null,
        name varchar(255),
        entity bigint,
        primary key (id)
    )
14:12:33,420 DEBUG SQL:104 - 
    alter table my_child 
        add constraint FKE37274C934E3E7E0 
        foreign key (inv_parent_id) 
        references my_entity
14:12:33,421 DEBUG SQL:104 - 
    alter table my_child 
        add constraint FKE37274C919B5F9EE 
        foreign key (non_inv_parent_id) 
        references my_entity
14:12:33,421 DEBUG SQL:104 - 
    alter table my_entity 
        add constraint FK8E9F59D6E06852E9 
        foreign key (sibling) 
        references my_sibling
14:12:33,422 DEBUG SQL:104 - 
    alter table my_sibling 
        add constraint FK205E6F2F15D01C1 
        foreign key (entity) 
        references my_entity
14:12:33,422  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:33,436  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:12:33,436  INFO CustomRunner:139 - Test: testIdentityColumnGeneratedIds
14:12:33,438 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,439 DEBUG SQL:104 - 
    delete 
    from
        my_entity 
    where
        id=?
14:12:33,439  INFO CustomRunner:139 - Test: testPersistOutsideTransaction
14:12:33,440 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,441 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,442 DEBUG SQL:104 - 
    update
        my_child 
    set
        non_inv_parent_id=null 
    where
        non_inv_parent_id=?
14:12:33,442 DEBUG SQL:104 - 
    delete 
    from
        my_entity 
    where
        id=?
14:12:33,465 DEBUG SQL:104 - 
    delete 
    from
        my_entity 
    where
        id=?
14:12:33,465  INFO CustomRunner:139 - Test: testPersistOutsideTransactionCascadedFromManyToOne
14:12:33,466 DEBUG SQL:104 - 
    select
        max(id) 
    from
        my_sibling
14:12:33,467 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,467 DEBUG SQL:104 - 
    insert 
    into
        my_sibling
        (name, entity, id) 
    values
        (?, ?, ?)
14:12:33,468 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete org.hibernate.test.generatedkeys.identity.MySibling
14:12:33,471 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[DOT] Node: '.'
             |  |  |  |  +-[IDENT] Node: 'org'
             |  |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  |  \-[IDENT] Node: 'test'
             |  |  \-[IDENT] Node: 'generatedkeys'
             |  \-[IDENT] Node: 'identity'
             \-[IDENT] Node: 'MySibling'

14:12:33,479 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,480 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.generatedkeys.identity.MySibling (<no alias>) -> mysibling0_
14:12:33,480 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (my_sibling)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[mysibling0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'my_sibling' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=my_sibling,tableAlias=mysibling0_,origin=null,columns={,className=org.hibernate.test.generatedkeys.identity.MySibling}}

14:12:33,480 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,480 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,480 DEBUG SQL:104 - 
    delete 
    from
        my_sibling
14:12:33,481 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete org.hibernate.test.generatedkeys.identity.MyEntity
14:12:33,482 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[DOT] Node: '.'
             |  |  |  |  +-[IDENT] Node: 'org'
             |  |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  |  \-[IDENT] Node: 'test'
             |  |  \-[IDENT] Node: 'generatedkeys'
             |  \-[IDENT] Node: 'identity'
             \-[IDENT] Node: 'MyEntity'

14:12:33,491 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,492 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.generatedkeys.identity.MyEntity (<no alias>) -> myentity0_
14:12:33,492 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (my_entity)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[myentity0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'my_entity' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=my_entity,tableAlias=myentity0_,origin=null,columns={,className=org.hibernate.test.generatedkeys.identity.MyEntity}}

14:12:33,492 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,492 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,493 DEBUG SQL:104 - 
    delete 
    from
        my_entity
14:12:33,504  INFO CustomRunner:139 - Test: testPersistOutsideTransactionCascadedToInverseCollection
14:12:33,506 DEBUG SQL:104 - 
    select
        max(id) 
    from
        my_child
14:12:33,506 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,507 DEBUG SQL:104 - 
    insert 
    into
        my_child
        (name, inv_parent_id, id) 
    values
        (?, ?, ?)
14:12:33,507 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete org.hibernate.test.generatedkeys.identity.MyChild
14:12:33,508 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[DOT] Node: '.'
             |  |  |  |  +-[IDENT] Node: 'org'
             |  |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  |  \-[IDENT] Node: 'test'
             |  |  \-[IDENT] Node: 'generatedkeys'
             |  \-[IDENT] Node: 'identity'
             \-[IDENT] Node: 'MyChild'

14:12:33,518 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,519 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.generatedkeys.identity.MyChild (<no alias>) -> mychild0_
14:12:33,519 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (my_child)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[mychild0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'my_child' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=my_child,tableAlias=mychild0_,origin=null,columns={,className=org.hibernate.test.generatedkeys.identity.MyChild}}

14:12:33,519 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,520 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:12:33,520 DEBUG SQL:104 - 
    delete 
    from
        my_child
14:12:33,520 DEBUG SQL:104 - 
    delete 
    from
        my_entity
14:12:33,521  INFO CustomRunner:139 - Test: testPersistOutsideTransactionCascadedToManyToOne
14:12:33,522 DEBUG SQL:104 - 
    insert 
    into
        my_sibling
        (name, entity, id) 
    values
        (?, ?, ?)
14:12:33,522 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,523 DEBUG SQL:104 - 
    delete 
    from
        my_entity
14:12:33,523 DEBUG SQL:104 - 
    delete 
    from
        my_sibling
14:12:33,524  INFO CustomRunner:139 - Test: testPersistOutsideTransactionCascadedToNonInverseCollection
14:12:33,525 DEBUG SQL:104 - 
    insert 
    into
        my_entity
        (id, name, sibling) 
    values
        (null, ?, ?)
14:12:33,526 DEBUG SQL:104 - 
    insert 
    into
        my_child
        (name, inv_parent_id, id) 
    values
        (?, ?, ?)
14:12:33,532 DEBUG SQL:104 - 
    update
        my_child 
    set
        non_inv_parent_id=? 
    where
        id=?
14:12:33,533 DEBUG SQL:104 - 
    delete 
    from
        my_child
14:12:33,533 DEBUG SQL:104 - 
    delete 
    from
        my_entity
14:12:33,534  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:12:33,535 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:12:33,535 DEBUG SQL:104 - 
    alter table my_child 
        drop constraint FKE37274C934E3E7E0
14:12:33,535 DEBUG SQL:104 - 
    alter table my_child 
        drop constraint FKE37274C919B5F9EE
14:12:33,542 DEBUG SQL:104 - 
    alter table my_entity 
        drop constraint FK8E9F59D6E06852E9
14:12:33,542 DEBUG SQL:104 - 
    alter table my_sibling 
        drop constraint FK205E6F2F15D01C1
14:12:33,543 DEBUG SQL:104 - 
    drop table my_child if exists
14:12:33,543 DEBUG SQL:104 - 
    drop table my_entity if exists
14:12:33,544 DEBUG SQL:104 - 
    drop table my_sibling if exists
14:12:33,544  INFO SchemaExport:405 - HHH000230: Schema export complete
14:12:33,544  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
