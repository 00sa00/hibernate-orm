<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.bidi.AuctionTest2" tests="1" time="0.258" timestamp="2013-02-28T20:11:39">
  <properties />
  <testcase classname="org.hibernate.test.bidi.AuctionTest2" name="testLazy" time="0.204" />
  <system-out><![CDATA[14:11:39,277  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.bidi.AuctionTest2
14:11:39,281  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/bidi/Auction2.hbm.xml
14:11:39,294  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:11:39,294  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:11:39,294  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:11:39,295  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:11:39,295  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:11:39,297  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:11:39,298  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:11:39,299  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:11:39,299  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:11:39,299  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:11:39,311  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:11:39,312 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:11:39,312 DEBUG SQL:104 - 
    alter table TAuction2 
        drop constraint FKE35DBAC35A8CBB54
14:11:39,312 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table TAuction2 drop constraint FKE35DBAC35A8CBB54
14:11:39,312 ERROR SchemaExport:426 - Table "TAUCTION2" not found; SQL statement:

    alter table TAuction2 
        drop constraint FKE35DBAC35A8CBB54 [42102-145]
14:11:39,312 DEBUG SQL:104 - 
    alter table TBid2 
        drop constraint FK4BF4D498AB4B515
14:11:39,313 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table TBid2 drop constraint FK4BF4D498AB4B515
14:11:39,313 ERROR SchemaExport:426 - Table "TBID2" not found; SQL statement:

    alter table TBid2 
        drop constraint FK4BF4D498AB4B515 [42102-145]
14:11:39,313 DEBUG SQL:104 - 
    drop table TAuction2 if exists
14:11:39,313 DEBUG SQL:104 - 
    drop table TBid2 if exists
14:11:39,313 DEBUG SQL:104 - 
    create table TAuction2 (
        id bigint generated by default as identity,
        description varchar(255),
        endDatetime timestamp,
        successfulBid bigint,
        primary key (id)
    )
14:11:39,314 DEBUG SQL:104 - 
    create table TBid2 (
        id bigint generated by default as identity,
        amount decimal(31,19),
        createdDatetime timestamp,
        auctionId bigint,
        primary key (id)
    )
14:11:39,317 DEBUG SQL:104 - 
    alter table TAuction2 
        add constraint FKE35DBAC35A8CBB54 
        foreign key (successfulBid) 
        references TBid2
14:11:39,319 DEBUG SQL:104 - 
    alter table TBid2 
        add constraint FK4BF4D498AB4B515 
        foreign key (auctionId) 
        references TAuction2
14:11:39,320  INFO SchemaExport:405 - HHH000230: Schema export complete
14:11:39,320  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:11:39,321  INFO CustomRunner:139 - Test: testLazy
14:11:39,323 DEBUG SQL:104 - 
    insert 
    into
        TAuction2
        (id, description, endDatetime, successfulBid) 
    values
        (null, ?, ?, ?)
14:11:39,324 DEBUG SQL:104 - 
    insert 
    into
        TBid2
        (id, amount, createdDatetime, auctionId) 
    values
        (null, ?, ?, ?)
14:11:39,326 DEBUG SQL:104 - 
    update
        TAuction2 
    set
        description=?,
        endDatetime=?,
        successfulBid=? 
    where
        id=?
14:11:39,326 DEBUG SQL:104 - 
    select
        auction0_.id as id0_0_,
        auction0_.description as descript2_0_0_,
        auction0_.endDatetime as endDatet3_0_0_,
        auction0_.successfulBid as successf4_0_0_ 
    from
        TAuction2 auction0_ 
    where
        auction0_.id=?
14:11:39,345 DEBUG SQL:104 - 
    select
        bids0_.auctionId as auctionId0_1_,
        bids0_.id as id1_1_,
        bids0_.id as id1_0_,
        bids0_.amount as amount1_0_,
        bids0_.createdDatetime as createdD3_1_0_,
        bids0_.auctionId as auctionId1_0_,
        exists(select
            a.id 
        from
            TAuction2 a 
        where
            a.successfulBid=bids0_.id) as formula39_0_ 
    from
        TBid2 bids0_ 
    where
        bids0_.auctionId=?
14:11:39,348 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.bids
14:11:39,351 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          +-[RANGE] Node: 'RANGE'
          |  +-[DOT] Node: '.'
          |  |  +-[DOT] Node: '.'
          |  |  |  +-[DOT] Node: '.'
          |  |  |  |  +-[DOT] Node: '.'
          |  |  |  |  |  +-[IDENT] Node: 'org'
          |  |  |  |  |  \-[IDENT] Node: 'hibernate'
          |  |  |  |  \-[IDENT] Node: 'test'
          |  |  |  \-[IDENT] Node: 'bidi'
          |  |  \-[IDENT] Node: 'Auction'
          |  \-[ALIAS] Node: 'a'
          \-[JOIN] Node: 'join'
             +-[LEFT] Node: 'left'
             +-[FETCH] Node: 'fetch'
             \-[DOT] Node: '.'
                +-[IDENT] Node: 'a'
                \-[IDENT] Node: 'bids'

14:11:39,359 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,360 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Auction (a) -> auction0_
14:11:39,360 DEBUG FromReferenceNode:74 - Resolved : a -> auction0_.id
14:11:39,360 DEBUG DotNode:599 - getDataType() : bids -> org.hibernate.type.BagType(org.hibernate.test.bidi.Auction.bids)
14:11:39,360 DEBUG FromElementFactory:376 - createEntityAssociation() : One to many - path = a.bids role = org.hibernate.test.bidi.Auction.bids associatedEntityName = org.hibernate.test.bidi.Bid
14:11:39,360 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Bid (<no alias>) -> bids1_
14:11:39,360 DEBUG FromClause:282 - addJoinByPathMap() : a.bids -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid2,tableAlias=bids1_,origin=TAuction2 auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}
14:11:39,361 DEBUG DotNode:308 - dereferenceCollection() : Created new FROM element for a.bids : TBid2 bids1_
14:11:39,361 DEBUG FromReferenceNode:74 - Resolved : a.bids -> .
14:11:39,361 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'TBid2 bids1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.bidi.Auction.bids,tableName=TBid2,tableAlias=bids1_,origin=TAuction2 auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}

14:11:39,384 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} ( TAuction2 auction0_ TBid2 bids1_ ) ) )
14:11:39,385 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:11:39,385 DEBUG JoinProcessor:175 - Using FROM fragment [TAuction2 auction0_]
14:11:39,385 DEBUG JoinProcessor:175 - Using FROM fragment [left outer join TBid2 bids1_ on auction0_.id=bids1_.auctionId]
14:11:39,386 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (TBid2,TAuction2)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'auction0_.id as id0_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction2,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'bids1_.id as id1_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.bidi.Auction.bids,tableName=TBid2,tableAlias=bids1_,origin=TAuction2 auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}}
    |  +-[SQL_TOKEN] SqlFragment: 'auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.successfulBid as successf4_0_0_'
    |  +-[SQL_TOKEN] SqlFragment: 'bids1_.amount as amount1_1_, bids1_.createdDatetime as createdD3_1_1_, bids1_.auctionId as auctionId1_1_, exists(select a.id from TAuction2 a where a.successfulBid=bids1_.id) as formula39_1_'
    |  \-[SQL_TOKEN] SqlFragment: 'bids1_.auctionId as auctionId0_0__, bids1_.id as id1_0__'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=2, fromElementByClassAlias=[a], fromElementByTableAlias=[bids1_, auction0_], fromElementsByPath=[a.bids], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'TAuction2 auction0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction2,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}
          \-[JOIN_FRAGMENT] FromElement: 'left outer join TBid2 bids1_ on auction0_.id=bids1_.auctionId' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.bidi.Auction.bids,tableName=TBid2,tableAlias=bids1_,origin=TAuction2 auction0_,columns={auction0_.id ,className=org.hibernate.test.bidi.Bid}}

14:11:39,403 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,404 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.bids
14:11:39,404 DEBUG QueryTranslatorImpl:236 - SQL: select auction0_.id as id0_0_, bids1_.id as id1_1_, auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.successfulBid as successf4_0_0_, bids1_.amount as amount1_1_, bids1_.createdDatetime as createdD3_1_1_, bids1_.auctionId as auctionId1_1_, exists(select a.id from TAuction2 a where a.successfulBid=bids1_.id) as formula39_1_, bids1_.auctionId as auctionId0_0__, bids1_.id as id1_0__ from TAuction2 auction0_ left outer join TBid2 bids1_ on auction0_.id=bids1_.auctionId
14:11:39,404 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,405 DEBUG SQL:104 - 
    select
        auction0_.id as id0_0_,
        bids1_.id as id1_1_,
        auction0_.description as descript2_0_0_,
        auction0_.endDatetime as endDatet3_0_0_,
        auction0_.successfulBid as successf4_0_0_,
        bids1_.amount as amount1_1_,
        bids1_.createdDatetime as createdD3_1_1_,
        bids1_.auctionId as auctionId1_1_,
        exists(select
            a.id 
        from
            TAuction2 a 
        where
            a.successfulBid=bids1_.id) as formula39_1_,
        bids1_.auctionId as auctionId0_0__,
        bids1_.id as id1_0__ 
    from
        TAuction2 auction0_ 
    left outer join
        TBid2 bids1_ 
            on auction0_.id=bids1_.auctionId
14:11:39,407 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.successfulBid
14:11:39,410 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          +-[RANGE] Node: 'RANGE'
          |  +-[DOT] Node: '.'
          |  |  +-[DOT] Node: '.'
          |  |  |  +-[DOT] Node: '.'
          |  |  |  |  +-[DOT] Node: '.'
          |  |  |  |  |  +-[IDENT] Node: 'org'
          |  |  |  |  |  \-[IDENT] Node: 'hibernate'
          |  |  |  |  \-[IDENT] Node: 'test'
          |  |  |  \-[IDENT] Node: 'bidi'
          |  |  \-[IDENT] Node: 'Auction'
          |  \-[ALIAS] Node: 'a'
          \-[JOIN] Node: 'join'
             +-[LEFT] Node: 'left'
             +-[FETCH] Node: 'fetch'
             \-[DOT] Node: '.'
                +-[IDENT] Node: 'a'
                \-[IDENT] Node: 'successfulBid'

14:11:39,426 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,427 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Auction (a) -> auction0_
14:11:39,427 DEBUG FromReferenceNode:74 - Resolved : a -> auction0_.id
14:11:39,428 DEBUG DotNode:599 - getDataType() : successfulBid -> org.hibernate.type.ManyToOneType(org.hibernate.test.bidi.Bid)
14:11:39,428 DEBUG DotNode:389 - dereferenceEntityJoin() : generating join for successfulBid in org.hibernate.test.bidi.Auction (<no alias>) parent = [ {null} ]
14:11:39,428 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.bidi.Bid (<no alias>) -> bid1_
14:11:39,428 DEBUG FromClause:282 - addJoinByPathMap() : a.successfulBid -> FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid2,tableAlias=bid1_,origin=TAuction2 auction0_,columns={auction0_.successfulBid ,className=org.hibernate.test.bidi.Bid}}
14:11:39,428 DEBUG FromReferenceNode:74 - Resolved : a.successfulBid -> auction0_.successfulBid
14:11:39,429 DEBUG HqlSqlWalker:403 - createFromJoinElement() : -- join tree --
 \-[JOIN_FRAGMENT] FromElement: 'TBid2 bid1_' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid2,tableAlias=bid1_,origin=TAuction2 auction0_,columns={auction0_.successfulBid ,className=org.hibernate.test.bidi.Bid}}

14:11:39,455 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1} ( TAuction2 auction0_ TBid2 bid1_ ) ) )
14:11:39,455 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:11:39,455 DEBUG JoinProcessor:175 - Using FROM fragment [TAuction2 auction0_]
14:11:39,456 DEBUG JoinProcessor:175 - Using FROM fragment [left outer join TBid2 bid1_ on auction0_.successfulBid=bid1_.id]
14:11:39,456 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (TBid2,TAuction2)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'auction0_.id as id0_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction2,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}}
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'bid1_.id as id1_1_' {FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid2,tableAlias=bid1_,origin=TAuction2 auction0_,columns={auction0_.successfulBid ,className=org.hibernate.test.bidi.Bid}}}
    |  +-[SQL_TOKEN] SqlFragment: 'auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.successfulBid as successf4_0_0_'
    |  \-[SQL_TOKEN] SqlFragment: 'bid1_.amount as amount1_1_, bid1_.createdDatetime as createdD3_1_1_, bid1_.auctionId as auctionId1_1_, exists(select a.id from TAuction2 a where a.successfulBid=bid1_.id) as formula39_1_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=2, fromElements=2, fromElementByClassAlias=[a], fromElementByTableAlias=[bid1_, auction0_], fromElementsByPath=[a.successfulBid], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'TAuction2 auction0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=a,role=null,tableName=TAuction2,tableAlias=auction0_,origin=null,columns={,className=org.hibernate.test.bidi.Auction}}
          \-[JOIN_FRAGMENT] FromElement: 'left outer join TBid2 bid1_ on auction0_.successfulBid=bid1_.id' FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=TBid2,tableAlias=bid1_,origin=TAuction2 auction0_,columns={auction0_.successfulBid ,className=org.hibernate.test.bidi.Bid}}

14:11:39,456 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,457 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.bidi.Auction a left join fetch a.successfulBid
14:11:39,457 DEBUG QueryTranslatorImpl:236 - SQL: select auction0_.id as id0_0_, bid1_.id as id1_1_, auction0_.description as descript2_0_0_, auction0_.endDatetime as endDatet3_0_0_, auction0_.successfulBid as successf4_0_0_, bid1_.amount as amount1_1_, bid1_.createdDatetime as createdD3_1_1_, bid1_.auctionId as auctionId1_1_, exists(select a.id from TAuction2 a where a.successfulBid=bid1_.id) as formula39_1_ from TAuction2 auction0_ left outer join TBid2 bid1_ on auction0_.successfulBid=bid1_.id
14:11:39,457 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:11:39,457 DEBUG SQL:104 - 
    select
        auction0_.id as id0_0_,
        bid1_.id as id1_1_,
        auction0_.description as descript2_0_0_,
        auction0_.endDatetime as endDatet3_0_0_,
        auction0_.successfulBid as successf4_0_0_,
        bid1_.amount as amount1_1_,
        bid1_.createdDatetime as createdD3_1_1_,
        bid1_.auctionId as auctionId1_1_,
        exists(select
            a.id 
        from
            TAuction2 a 
        where
            a.successfulBid=bid1_.id) as formula39_1_ 
    from
        TAuction2 auction0_ 
    left outer join
        TBid2 bid1_ 
            on auction0_.successfulBid=bid1_.id
14:11:39,459 DEBUG SQL:104 - 
    select
        bids0_.auctionId as auctionId0_1_,
        bids0_.id as id1_1_,
        bids0_.id as id1_0_,
        bids0_.amount as amount1_0_,
        bids0_.createdDatetime as createdD3_1_0_,
        bids0_.auctionId as auctionId1_0_,
        exists(select
            a.id 
        from
            TAuction2 a 
        where
            a.successfulBid=bids0_.id) as formula39_0_ 
    from
        TBid2 bids0_ 
    where
        bids0_.auctionId=?
14:11:39,460 DEBUG SQL:104 - 
    select
        bid0_.id as id1_0_,
        bid0_.amount as amount1_0_,
        bid0_.createdDatetime as createdD3_1_0_,
        bid0_.auctionId as auctionId1_0_,
        exists(select
            a.id 
        from
            TAuction2 a 
        where
            a.successfulBid=bid0_.id) as formula39_0_ 
    from
        TBid2 bid0_ 
    where
        bid0_.id=?
14:11:39,490 DEBUG SQL:104 - 
    select
        auction0_.id as id0_0_,
        auction0_.description as descript2_0_0_,
        auction0_.endDatetime as endDatet3_0_0_,
        auction0_.successfulBid as successf4_0_0_ 
    from
        TAuction2 auction0_ 
    where
        auction0_.id=?
14:11:39,491 DEBUG SQL:104 - 
    select
        bids0_.auctionId as auctionId0_1_,
        bids0_.id as id1_1_,
        bids0_.id as id1_0_,
        bids0_.amount as amount1_0_,
        bids0_.createdDatetime as createdD3_1_0_,
        bids0_.auctionId as auctionId1_0_,
        exists(select
            a.id 
        from
            TAuction2 a 
        where
            a.successfulBid=bids0_.id) as formula39_0_ 
    from
        TBid2 bids0_ 
    where
        bids0_.auctionId=?
14:11:39,525  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:11:39,526 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:11:39,526 DEBUG SQL:104 - 
    alter table TAuction2 
        drop constraint FKE35DBAC35A8CBB54
14:11:39,527 DEBUG SQL:104 - 
    alter table TBid2 
        drop constraint FK4BF4D498AB4B515
14:11:39,527 DEBUG SQL:104 - 
    drop table TAuction2 if exists
14:11:39,527 DEBUG SQL:104 - 
    drop table TBid2 if exists
14:11:39,528  INFO SchemaExport:405 - HHH000230: Schema export complete
14:11:39,528  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
