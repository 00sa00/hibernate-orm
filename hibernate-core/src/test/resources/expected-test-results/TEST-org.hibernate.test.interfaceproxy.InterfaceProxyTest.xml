<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.interfaceproxy.InterfaceProxyTest" tests="1" time="0.06" timestamp="2013-02-28T20:14:48">
  <properties />
  <testcase classname="org.hibernate.test.interfaceproxy.InterfaceProxyTest" name="testInterfaceProxies" time="0.017" />
  <system-out><![CDATA[14:14:48,190  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.interfaceproxy.InterfaceProxyTest
14:14:48,192  INFO Configuration:706 - HHH000221: Reading mappings from resource: org/hibernate/test/interfaceproxy/Item.hbm.xml
14:14:48,200  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:14:48,200  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:14:48,200  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:14:48,201  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:14:48,201  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:14:48,202  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:14:48,202  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:14:48,203  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:14:48,203  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:14:48,203  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:14:48,216  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:48,216 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:48,217 DEBUG SQL:104 - 
    alter table Documents 
        drop constraint FKAFAF7298830E2B11
14:14:48,217 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Documents drop constraint FKAFAF7298830E2B11
14:14:48,217 ERROR SchemaExport:426 - Table "DOCUMENTS" not found; SQL statement:

    alter table Documents 
        drop constraint FKAFAF7298830E2B11 [42102-145]
14:14:48,217 DEBUG SQL:104 - 
    alter table Folders 
        drop constraint FK3A7F09A5830E2B11
14:14:48,217 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Folders drop constraint FK3A7F09A5830E2B11
14:14:48,217 ERROR SchemaExport:426 - Table "FOLDERS" not found; SQL statement:

    alter table Folders 
        drop constraint FK3A7F09A5830E2B11 [42102-145]
14:14:48,218 DEBUG SQL:104 - 
    alter table Folders 
        drop constraint FK3A7F09A52583A5BB
14:14:48,218 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table Folders drop constraint FK3A7F09A52583A5BB
14:14:48,218 ERROR SchemaExport:426 - Table "FOLDERS" not found; SQL statement:

    alter table Folders 
        drop constraint FK3A7F09A52583A5BB [42102-145]
14:14:48,218 DEBUG SQL:104 - 
    alter table SecureDocuments 
        drop constraint FK5E00C4E15DF269F4
14:14:48,218 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table SecureDocuments drop constraint FK5E00C4E15DF269F4
14:14:48,218 ERROR SchemaExport:426 - Table "SECUREDOCUMENTS" not found; SQL statement:

    alter table SecureDocuments 
        drop constraint FK5E00C4E15DF269F4 [42102-145]
14:14:48,218 DEBUG SQL:104 - 
    drop table Documents if exists
14:14:48,219 DEBUG SQL:104 - 
    drop table Folders if exists
14:14:48,219 DEBUG SQL:104 - 
    drop table Items if exists
14:14:48,219 DEBUG SQL:104 - 
    drop table SecureDocuments if exists
14:14:48,219 DEBUG SQL:104 - 
    create table Documents (
        id bigint not null,
        content blob not null,
        modified timestamp not null,
        created timestamp not null,
        primary key (id)
    )
14:14:48,220 DEBUG SQL:104 - 
    create table Folders (
        id bigint not null,
        parent bigint,
        primary key (id)
    )
14:14:48,222 DEBUG SQL:104 - 
    create table Items (
        id bigint generated by default as identity,
        name varchar(255) not null,
        primary key (id)
    )
14:14:48,223 DEBUG SQL:104 - 
    create table SecureDocuments (
        documentId bigint not null,
        permissionBits tinyint not null,
        owner varchar(255) not null,
        primary key (documentId)
    )
14:14:48,223 DEBUG SQL:104 - 
    alter table Documents 
        add constraint FKAFAF7298830E2B11 
        foreign key (id) 
        references Items
14:14:48,224 DEBUG SQL:104 - 
    alter table Folders 
        add constraint FK3A7F09A5830E2B11 
        foreign key (id) 
        references Items
14:14:48,224 DEBUG SQL:104 - 
    alter table Folders 
        add constraint FK3A7F09A52583A5BB 
        foreign key (parent) 
        references Folders
14:14:48,224 DEBUG SQL:104 - 
    alter table SecureDocuments 
        add constraint FK5E00C4E15DF269F4 
        foreign key (documentId) 
        references Documents
14:14:48,225  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:48,225  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:14:48,225  INFO CustomRunner:139 - Test: testInterfaceProxies
14:14:48,228 DEBUG SQL:104 - 
    insert 
    into
        Items
        (id, name) 
    values
        (null, ?)
14:14:48,228 DEBUG SQL:104 - 
    insert 
    into
        Documents
        (content, modified, created, id) 
    values
        (?, ?, ?, ?)
14:14:48,229 DEBUG SQL:104 - 
    insert 
    into
        Items
        (id, name) 
    values
        (null, ?)
14:14:48,230 DEBUG SQL:104 - 
    insert 
    into
        Documents
        (content, modified, created, id) 
    values
        (?, ?, ?, ?)
14:14:48,230 DEBUG SQL:104 - 
    insert 
    into
        SecureDocuments
        (permissionBits, owner, documentId) 
    values
        (?, ?, ?)
14:14:48,230 DEBUG SQL:104 - 
    select
        itemimpl0_.id as id2_0_,
        itemimpl0_.name as name2_0_,
        itemimpl0_1_.content as content0_0_,
        itemimpl0_1_.modified as modified0_0_,
        itemimpl0_1_.created as created0_0_,
        itemimpl0_2_.permissionBits as permissi2_3_0_,
        itemimpl0_2_.owner as owner3_0_,
        itemimpl0_3_.parent as parent1_0_,
        case 
            when itemimpl0_2_.documentId is not null then 2 
            when itemimpl0_1_.id is not null then 1 
            when itemimpl0_3_.id is not null then 3 
            when itemimpl0_.id is not null then 0 
        end as clazz_0_ 
    from
        Items itemimpl0_ 
    left outer join
        Documents itemimpl0_1_ 
            on itemimpl0_.id=itemimpl0_1_.id 
    left outer join
        SecureDocuments itemimpl0_2_ 
            on itemimpl0_.id=itemimpl0_2_.documentId 
    left outer join
        Folders itemimpl0_3_ 
            on itemimpl0_.id=itemimpl0_3_.id 
    where
        itemimpl0_.id=?
14:14:48,231 DEBUG SQL:104 - 
    select
        itemimpl0_.id as id2_0_,
        itemimpl0_.name as name2_0_,
        itemimpl0_1_.content as content0_0_,
        itemimpl0_1_.modified as modified0_0_,
        itemimpl0_1_.created as created0_0_,
        itemimpl0_2_.permissionBits as permissi2_3_0_,
        itemimpl0_2_.owner as owner3_0_,
        itemimpl0_3_.parent as parent1_0_,
        case 
            when itemimpl0_2_.documentId is not null then 2 
            when itemimpl0_1_.id is not null then 1 
            when itemimpl0_3_.id is not null then 3 
            when itemimpl0_.id is not null then 0 
        end as clazz_0_ 
    from
        Items itemimpl0_ 
    left outer join
        Documents itemimpl0_1_ 
            on itemimpl0_.id=itemimpl0_1_.id 
    left outer join
        SecureDocuments itemimpl0_2_ 
            on itemimpl0_.id=itemimpl0_2_.documentId 
    left outer join
        Folders itemimpl0_3_ 
            on itemimpl0_.id=itemimpl0_3_.id 
    where
        itemimpl0_.id=?
14:14:48,233 DEBUG SQL:104 - 
    select
        documentim0_.id as id2_0_,
        documentim0_1_.name as name2_0_,
        documentim0_.content as content0_0_,
        documentim0_.modified as modified0_0_,
        documentim0_.created as created0_0_,
        documentim0_2_.permissionBits as permissi2_3_0_,
        documentim0_2_.owner as owner3_0_,
        case 
            when documentim0_2_.documentId is not null then 2 
            when documentim0_.id is not null then 1 
        end as clazz_0_ 
    from
        Documents documentim0_ 
    inner join
        Items documentim0_1_ 
            on documentim0_.id=documentim0_1_.id 
    left outer join
        SecureDocuments documentim0_2_ 
            on documentim0_.id=documentim0_2_.documentId 
    where
        documentim0_.id=?
14:14:48,238 DEBUG SQL:104 - 
    select
        securedocu0_.documentId as id2_0_,
        securedocu0_2_.name as name2_0_,
        securedocu0_1_.content as content0_0_,
        securedocu0_1_.modified as modified0_0_,
        securedocu0_1_.created as created0_0_,
        securedocu0_.permissionBits as permissi2_3_0_,
        securedocu0_.owner as owner3_0_ 
    from
        SecureDocuments securedocu0_ 
    inner join
        Documents securedocu0_1_ 
            on securedocu0_.documentId=securedocu0_1_.id 
    inner join
        Items securedocu0_2_ 
            on securedocu0_.documentId=securedocu0_2_.id 
    where
        securedocu0_.documentId=?
14:14:48,239 DEBUG QueryTranslatorImpl:265 - parse() - HQL: delete org.hibernate.test.interfaceproxy.ItemImpl
14:14:48,240 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[DELETE] Node: 'delete'
    \-[FROM] Node: 'FROM'
       \-[RANGE] Node: 'RANGE'
          \-[DOT] Node: '.'
             +-[DOT] Node: '.'
             |  +-[DOT] Node: '.'
             |  |  +-[DOT] Node: '.'
             |  |  |  +-[IDENT] Node: 'org'
             |  |  |  \-[IDENT] Node: 'hibernate'
             |  |  \-[IDENT] Node: 'test'
             |  \-[IDENT] Node: 'interfaceproxy'
             \-[IDENT] Node: 'ItemImpl'

14:14:48,240 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:48,240 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.interfaceproxy.ItemImpl (<no alias>) -> itemimpl0_
14:14:48,240 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[DELETE] DeleteStatement: 'delete'  querySpaces (Items)
    \-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[itemimpl0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'Items' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=Items,tableAlias=itemimpl0_,origin=null,columns={,className=org.hibernate.test.interfaceproxy.ItemImpl}}

14:14:48,240 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:14:48,241 DEBUG DeleteStatement:73 - getWhereClause() : Creating a new WHERE clause...
14:14:48,241 DEBUG SQL:104 - 
    insert 
    into
        HT_Items
        select
            itemimpl0_.id as id 
        from
            Items itemimpl0_
14:14:48,241 DEBUG SQL:104 - 
    delete 
    from
        Folders 
    where
        (
            id
        ) IN (
            select
                id 
            from
                HT_Items
        )
14:14:48,242 DEBUG SQL:104 - 
    delete 
    from
        SecureDocuments 
    where
        (
            documentId
        ) IN (
            select
                id 
            from
                HT_Items
        )
14:14:48,242 DEBUG SQL:104 - 
    delete 
    from
        Documents 
    where
        (
            id
        ) IN (
            select
                id 
            from
                HT_Items
        )
14:14:48,242 DEBUG SQL:104 - 
    delete 
    from
        Items 
    where
        (
            id
        ) IN (
            select
                id 
            from
                HT_Items
        )
14:14:48,242 DEBUG SQL:104 - 
    delete 
    from
        HT_Items
14:14:48,243  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:14:48,243 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:14:48,244 DEBUG SQL:104 - 
    alter table Documents 
        drop constraint FKAFAF7298830E2B11
14:14:48,244 DEBUG SQL:104 - 
    alter table Folders 
        drop constraint FK3A7F09A5830E2B11
14:14:48,244 DEBUG SQL:104 - 
    alter table Folders 
        drop constraint FK3A7F09A52583A5BB
14:14:48,244 DEBUG SQL:104 - 
    alter table SecureDocuments 
        drop constraint FK5E00C4E15DF269F4
14:14:48,244 DEBUG SQL:104 - 
    drop table Documents if exists
14:14:48,245 DEBUG SQL:104 - 
    drop table Folders if exists
14:14:48,245 DEBUG SQL:104 - 
    drop table Items if exists
14:14:48,245 DEBUG SQL:104 - 
    drop table SecureDocuments if exists
14:14:48,245  INFO SchemaExport:405 - HHH000230: Schema export complete
14:14:48,245  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
