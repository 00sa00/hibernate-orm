<?xml version="1.0" encoding="UTF-8"?>
<testsuite errors="0" failures="0" hostname="dhcp-10.15.208.168.stl.redhat.com" name="org.hibernate.test.annotations.collectionelement.QueryTest" tests="1" time="0.053" timestamp="2013-02-28T20:10:17">
  <properties />
  <testcase classname="org.hibernate.test.annotations.collectionelement.QueryTest" name="testMemberOfSyntax" time="0.022" />
  <system-out><![CDATA[14:10:17,250  INFO CustomRunner:132 - BeforeClass: org.hibernate.test.annotations.collectionelement.QueryTest
14:10:17,254  INFO DriverManagerConnectionProviderImpl:99 - HHH000402: Using Hibernate built-in connection pool (not for production use!)
14:10:17,254  INFO DriverManagerConnectionProviderImpl:135 - HHH000115: Hibernate connection pool size: 5
14:10:17,254  INFO DriverManagerConnectionProviderImpl:138 - HHH000006: Autocommit mode: false
14:10:17,254  INFO DriverManagerConnectionProviderImpl:153 - HHH000401: using driver [org.h2.Driver] at URL [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
14:10:17,254  INFO DriverManagerConnectionProviderImpl:158 - HHH000046: Connection properties: {user=sa}
14:10:17,256  INFO Dialect:103 - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
14:10:17,256  INFO LobCreatorBuilder:94 - HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
14:10:17,257  INFO TransactionFactoryInitiator:66 - HHH000399: Using default transaction strategy (direct JDBC transactions)
14:10:17,257  INFO ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
14:10:17,257  WARN CachingRegionFactory:58 - CachingRegionFactory should be only used for testing.
14:10:17,265  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:10:17,265 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:10:17,265 DEBUG SQL:104 - 
    alter table SomeStrings 
        drop constraint FK420732CEA39655A1
14:10:17,266 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table SomeStrings drop constraint FK420732CEA39655A1
14:10:17,266 ERROR SchemaExport:426 - Table "SOMESTRINGS" not found; SQL statement:

    alter table SomeStrings 
        drop constraint FK420732CEA39655A1 [42102-145]
14:10:17,266 DEBUG SQL:104 - 
    drop table EWAEC if exists
14:10:17,266 DEBUG SQL:104 - 
    drop table SomeStrings if exists
14:10:17,266 DEBUG SQL:104 - 
    create table EWAEC (
        id bigint not null,
        primary key (id)
    )
14:10:17,267 DEBUG SQL:104 - 
    create table SomeStrings (
        EWAEC_ID bigint not null,
        someStrings varchar(255)
    )
14:10:17,267 DEBUG SQL:104 - 
    alter table SomeStrings 
        add constraint FK420732CEA39655A1 
        foreign key (EWAEC_ID) 
        references EWAEC
14:10:17,269  INFO SchemaExport:405 - HHH000230: Schema export complete
14:10:17,269  WARN SessionFactoryImpl:1554 - HHH000008: JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()
14:10:17,269  INFO CustomRunner:139 - Test: testMemberOfSyntax
14:10:17,270 DEBUG QueryTranslatorImpl:265 - parse() - HQL: from org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection e where 'abc' member of e.someStrings
14:10:17,272 DEBUG QueryTranslatorImpl:283 - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  \-[FROM] Node: 'from'
    |     \-[RANGE] Node: 'RANGE'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'org'
    |        |  |  |  |  |  \-[IDENT] Node: 'hibernate'
    |        |  |  |  |  \-[IDENT] Node: 'test'
    |        |  |  |  \-[IDENT] Node: 'annotations'
    |        |  |  \-[IDENT] Node: 'collectionelement'
    |        |  \-[IDENT] Node: 'EntityWithAnElementCollection'
    |        \-[ALIAS] Node: 'e'
    \-[WHERE] Node: 'where'
       \-[IN] Node: 'in'
          +-[QUOTED_STRING] Node: ''abc''
          \-[IN_LIST] Node: 'inList'
             \-[ELEMENTS] Node: 'elements'
                \-[DOT] Node: '.'
                   +-[IDENT] Node: 'e'
                   \-[IDENT] Node: 'someStrings'

14:10:17,279 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:10:17,280 DEBUG FromElement:157 - FromClause{level=1} : org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection (e) -> entitywith0_
14:10:17,282 DEBUG FromReferenceNode:74 - Resolved : e -> entitywith0_.id
14:10:17,282 DEBUG DotNode:599 - getDataType() : someStrings -> org.hibernate.type.SetType(org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection.someStrings)
14:10:17,282 DEBUG FromElement:157 - FromClause{level=1} : null (<no alias>) -> somestring1_
14:10:17,282 DEBUG FromClause:369 - addCollectionJoinFromElementByPath() : e.someStrings -> SomeStrings
14:10:17,283 DEBUG DotNode:308 - dereferenceCollection() : Created new FROM element for e.someStrings : SomeStrings somestring1_
14:10:17,283 DEBUG MethodNode:207 - Creating elements for e.someStrings[].elements
14:10:17,283 DEBUG FromElementType:347 - toColumns(somestring1_,elements) : subquery = select somestring1_.someStrings from SomeStrings somestring1_ where entitywith0_.id=somestring1_.EWAEC_ID
14:10:17,284 DEBUG HqlSqlWalker:629 - processQuery() :  ( SELECT ( FromClause{level=1}   ) ( where ( in 'abc' ( inList ( select somestring1_.someStrings from SomeStrings somestring1_ where entitywith0_.id=somestring1_.EWAEC_ID ( . entitywith0_.id someStrings ) ) ) ) ) )
14:10:17,284 DEBUG HqlSqlWalker:869 - Derived SELECT clause created.
14:10:17,284 DEBUG JoinProcessor:175 - Using FROM fragment [EWAEC entitywith0_]
14:10:17,284 DEBUG QueryTranslatorImpl:252 - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (EWAEC,SomeStrings)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  \-[SELECT_EXPR] SelectExpressionImpl: 'entitywith0_.id as id0_' {FromElement{explicit,collection join,not a fetch join,fetch non-lazy properties,classAlias=e,role=null,tableName=EWAEC,tableAlias=entitywith0_,origin=null,columns={,className=org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection}}}
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=2, fromElementByClassAlias=[e], fromElementByTableAlias=[entitywith0_, somestring1_], fromElementsByPath=[], collectionJoinFromElementsByPath=[e.someStrings], impliedElements=[]}
    |  +-[FROM_FRAGMENT] FromElement: 'EWAEC entitywith0_' FromElement{explicit,collection join,not a fetch join,fetch non-lazy properties,classAlias=e,role=null,tableName=EWAEC,tableAlias=entitywith0_,origin=null,columns={,className=org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection}}
    |  \-[FROM_FRAGMENT] ImpliedFromElement: '' ImpliedFromElement{implied,collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection.someStrings,tableName={none},tableAlias=somestring1_,origin=EWAEC entitywith0_,columns={,className=null}}
    \-[WHERE] SqlNode: 'where'
       \-[IN] InLogicOperatorNode: 'in'
          +-[QUOTED_STRING] LiteralNode: ''abc''
          \-[IN_LIST] SqlNode: 'inList'
             \-[SQL_TOKEN] CollectionFunction: 'select somestring1_.someStrings from SomeStrings somestring1_ where entitywith0_.id=somestring1_.EWAEC_ID' {method=elements,selectColumns=[select somestring1_.someStrings from SomeStrings somestring1_ where entitywith0_.id=somestring1_.EWAEC_ID],fromElement=somestring1_}
                \-[DOT] DotNode: '.' {propertyName=someStrings,dereferenceType=NULL_TREE_LOOKAHEAD,propertyPath=someStrings,path=e.someStrings,tableAlias=somestring1_,className=null,classAlias=null}
                   +-[ALIAS_REF] IdentNode: 'entitywith0_.id' {alias=e, className=org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection, tableAlias=entitywith0_}
                   \-[IDENT] IdentNode: 'someStrings' {originalText=someStrings}

14:10:17,290 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:10:17,290 DEBUG QueryTranslatorImpl:235 - HQL: from org.hibernate.test.annotations.collectionelement.EntityWithAnElementCollection e where 'abc' member of e.someStrings
14:10:17,291 DEBUG QueryTranslatorImpl:236 - SQL: select entitywith0_.id as id0_ from EWAEC entitywith0_ where 'abc' in (select somestring1_.someStrings from SomeStrings somestring1_ where entitywith0_.id=somestring1_.EWAEC_ID)
14:10:17,291 DEBUG ErrorCounter:82 - throwQueryException() : no errors
14:10:17,291 DEBUG SQL:104 - 
    select
        entitywith0_.id as id0_ 
    from
        EWAEC entitywith0_ 
    where
        'abc' in (
            select
                somestring1_.someStrings 
            from
                SomeStrings somestring1_ 
            where
                entitywith0_.id=somestring1_.EWAEC_ID
        )
14:10:17,293  INFO SchemaExport:343 - HHH000227: Running hbm2ddl schema export
14:10:17,293 DEBUG SchemaExport:353 - Import file not found: /import.sql
14:10:17,294 DEBUG SQL:104 - 
    alter table SomeStrings 
        drop constraint FK420732CEA39655A1
14:10:17,294 DEBUG SQL:104 - 
    drop table EWAEC if exists
14:10:17,301 DEBUG SQL:104 - 
    drop table SomeStrings if exists
14:10:17,302  INFO SchemaExport:405 - HHH000230: Schema export complete
14:10:17,302  INFO DriverManagerConnectionProviderImpl:162 - HHH000030: Cleaning up connection pool [jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
